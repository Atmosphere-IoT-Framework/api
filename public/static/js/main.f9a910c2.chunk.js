(this.webpackJsonprestool=this.webpackJsonprestool||[]).push([[0],{118:function(e){e.exports=JSON.parse('{"$id":"https://github.com/dsternlicht/RESTool/blob/master/config.schema.json","$schema":"http://json-schema.org/draft-07/schema#","description":"The configuration file used for a RESTool application, see https://github.com/dsternlicht/RESTool","type":"object","additionalProperties":false,"properties":{"name":{"type":"string","description":"The name of your app."},"pages":{"type":"array","items":{"$ref":"#/definitions/page"}},"baseUrl":{"type":"string","description":"Base url of the api. This will prefix the url of all the api methods defined for all pages. This is normally the domain plus a base path. For example: \\"https://restool-sample-app.herokuapp.com/api\\"\\n\\nNote: If different pages use different base urls this should not be used. Instead, you should explicitly define absolute urls for each method."},"errorMessageDataPath":{"$ref":"#/definitions/errorMessageDataPath"},"requestHeaders":{"$ref":"#/definitions/requestHeaders"},"unauthorizedRedirectUrl":{"type":"string","description":"Path to navigate to when the api returns a 401 (Unauthorized) error. You can use :returnUrl to pass a return location. For example: \\"/login/myLoginPage?return=:returnUrl\\""},"favicon":{"type":"string","description":"A URL for you app\'s favicon."},"loginUrl":{"type":"string","description":"A URL for you app\'s login entry point."},"customStyles":{"$ref":"#/definitions/customStyles"},"customLabels":{"$ref":"#/definitions/customLabels"}},"required":["name","pages"],"definitions":{"errorMessageDataPath":{"type":"array","items":{"type":"string"},"description":"The path within an error response object to look for an error message. If multiple are provided, each will be tried in order until a message is found."},"customStyles":{"type":"object","additionalProperties":false,"properties":{"vars":{"type":"object","additionalProperties":false,"properties":{"appText":{"type":"string","description":"Root text color."},"appBackground":{"type":"string","description":"App background color."},"navBackground":{"type":"string","description":"Navigation menu background color."},"navText":{"type":"string","description":"Navigation menu text color."},"navItemText":{"type":"string","description":"Navigation item text color."},"navItemHoverBackground":{"type":"string","description":"Navigation item background color on hover event."},"navItemActiveBackground":{"type":"string","description":"Active navigation item background color."},"actionButtonBackground":{"type":"string","description":"Action button background color."},"actionButtonHoverBackground":{"type":"string","description":"Action button background color on hover event."},"actionButtonText":{"type":"string","description":"Action button text  color."}}}}},"page":{"type":"object","additionalProperties":false,"properties":{"name":{"type":"string","description":"The name of the page. This will be presented in the menu."},"id":{"type":"string","description":"A unique identifier for the page. RESTool will use it to navigate between pages."},"itemName":{"type":"string","description":"The name of the entity visualized in this page."},"description":{"type":"string","description":"A short description about the page and its usage."},"requestHeaders":{"$ref":"#/definitions/requestHeaders"},"methods":{"$ref":"#/definitions/methods"},"customActions":{"type":"array","items":{"$ref":"#/definitions/customAction"},"description":"A list of extra (non RESTful) endpoints available in your RESTful API. Specifically customActions is a list of PUT or POST method objects."},"customLabels":{"$ref":"#/definitions/customLabels"}},"required":["name","id","itemName"]},"requestHeaders":{"patternProperties":{"^":{"type":"string"}},"description":"A list of key-value headers you wish to add to every request we\'re making.\\nFor example:\\n{ Authentication: \'SECRET_KEY\', \'X-USER-ID\': \'USER_ID\' }"},"methods":{"type":"object","additionalProperties":false,"properties":{"getAll":{"$ref":"#/definitions/getAll"},"getSingle":{"$ref":"#/definitions/getSingle"},"post":{"$ref":"#/definitions/post"},"graph":{"$ref":"#/definitions/post"},"put":{"$ref":"#/definitions/put"},"delete":{"$ref":"#/definitions/delete"}},"required":["getAll"]},"method":{"type":"object","properties":{"url":{"type":"string","description":"The url for making the request. The url could be either relative or absolute. If a baseUrl is defined then you should only provide a relative path. For example: /users/:id.\\nThe url could contain parameters that will be extracted if needed. For example: \\nhttps://website.com/users/:id - note that the parameter name in the url should match the one you\'re returning in your API."},"actualMethod":{"type":"string","enum":["get","put","post","delete","patch"]},"requestHeaders":{"$ref":"#/definitions/requestHeaders"},"queryParams":{"type":"array","items":{"$ref":"#/definitions/inputField"},"description":"An array of query parameters fields that will be added to the request.\\nIf your url includes the name of the parameter, it will be used as part of the path rather than as a query parameter. For example if your url is /api/contact/234/address you might make a parameter called contactId then set the url as follows: /api/contact/:contactId/address.\\nEach query param item is an object. See input fields."}},"required":["url"]},"getAll":{"allOf":[{"$ref":"#/definitions/method"},{"properties":{"fields":{"type":"array","items":{"$ref":"#/definitions/displayField"}},"dataPath":{"type":"string","description":"TODO"},"display":{"type":"object","properties":{"type":{"enum":["table","cards"]}},"description":"RESTool allows you to control how to output the data. The display object has a type property that will define how to display the data. RESTool supports two display type: \\"table\\" and \\"cards\\"."},"sortBy":{"type":["string","array"],"items":{"type":"string"},"description":"One or more paths to properties in the result object to sort the list by."},"pagination":{"$ref":"#/definitions/pagination"},"dataTransform":{"description":"Relevant only when using dynamic (js) config. A function to allow manipulation on the response data. Useful for changing/adding data for display purposes."}},"required":["display","fields"]}]},"getSingle":{"$ref":"#/definitions/method","description":"This method will be fired once you hit the edit button on an item in order to get a single item\'s data. By default, if this method hasn\'t been set, when editing an item, RESTool will take the raw data from the original getAll request.","properties":{"dataTransform":{"description":"Relevant only when using dynamic (js) config. A function to allow manipulation on the response data. Useful for changing/adding data for display purposes."}}},"post":{"allOf":[{"$ref":"#/definitions/method"},{"properties":{"fields":{"type":"array","items":{"$ref":"#/definitions/inputField"}}},"required":["fields"]}],"description":"The post method will be used to create new items in your API resource."},"graph":{"allOf":[{"$ref":"#/definitions/method"},{"properties":{"fields":{"type":"array","items":{"$ref":"#/definitions/inputField"}},"dataPath":{"type":"string","description":"TODO"}},"required":["fields"]}],"description":"This method will be used to create graph with the resource within the page."},"put":{"allOf":[{"$ref":"#/definitions/method"},{"properties":{"fields":{"type":"array","items":{"$ref":"#/definitions/inputField"}},"includeOriginalFields":{"type":"boolean","description":"When set to true, all fields from the original object are merged and sent in the request body. Default is false."}},"required":["fields"]}],"description":"The put method will be used to update an existing item in your API resource."},"delete":{"$ref":"#/definitions/method","description":"The delete method will be used to delete an existing item in your API resource."},"inputField":{"additionalProperties":false,"properties":{"name":{"type":"string","description":"The name of the field / parameter to be sent."},"type":{"type":"string","enum":["text","long-text","object","encode","integer","number","boolean","date","email","color","select","array","file","password","note","hidden"],"description":"Use the type field to define the type of the field."},"readonly":{"type":"boolean"},"label":{"type":"string","description":"A label that describes the field. This will act as a label in RESTool\'s forms."},"dataPath":{"type":"string","description":"Use this field to let RESTool know what is the path of this field in the body of the request."},"options":{"type":"array","items":{"anyOf":[{"type":"string"},{"type":"object","properties":{"display":{"type":"string"},"value":{}}}]},"description":"Add the options field if you chose a select as a type. This field should contain an array of options to be displayed in the select box."},"arrayType":{"type":"string","enum":["text","object"],"description":"For array field type, you should specify another property called arrayType so RESTool will know how to present & send the data in the POST and PUT methods."},"value":{"description":"Set a default value to the field."},"required":{"type":"boolean","description":"If true, a field will be marked as required on PUT and POST forms."},"placeholder":{"type":"string","description":"Input field placeholder."},"accept":{"type":"string","description":"An optional setting for file type inputs. When set, the file input\'s accept property will perform file type filtering when browsing for files."},"useInUrl":{"type":"boolean","description":"If true, a field can be used as a parameter in a PUT url. Otherwise only fields retrieved in the original GET can be used as parameters. It\'s data will still be added to the PUT request body."},"urlReplaceOnly":{"type":"boolean","description":"If true, a field will only be replaced in the URL and is not appended to the final query string."},"optionSource":{"$ref":"#/definitions/optionSource","description":"Use the optionSource field to load options for a select box from a REST service. If this is used with options, the items from options will be added to the select box before those fetched from the api."}},"required":["name","type"]},"displayField":{"additionalProperties":false,"properties":{"name":{"type":"string","description":"The property name of the field that contains the value in the API result."},"type":{"type":"string","enum":["text","url","image","colorbox","boolean","html"],"description":"This will help RESTool to render the main view.\\ntext -  will parse the value as a text\\nurl -  will render an anchor element with a clickable link\\nimage -  will render an image from the url\\ncolorbox -  will render a #RRGGBB hex string as an 80 x 20 pixel colored rectangle, overlaid with the hex color string"},"label":{"type":"string","description":"A label that describes the field. Will be presented as table headers in the main view."},"dataPath":{"type":"string","description":""},"url":{"type":"string","description":"URL for url typed fields"},"urlLabel":{"type":"string","description":"Display the url label rather than the entire value."},"filterable":{"type":"boolean","description":"Set to true to enable a text control to do simple client-side filtering by values of this field. Can be specified for multiple fields."},"truncate":{"type":"boolean","description":"Causes long values to be truncated. By default, truncation is not enabled for fields."},"htmlCode":{"type":"string","description":"HTML code to display in a cell. Use {value} to insert item value at this place"}},"required":["name","type"]},"optionSource":{"additionalProperties":false,"properties":{"url":{"type":"string","description":"url to fetch data from"},"dataPath":{"type":["string","null"],"description":"let us know where we should take the data from"},"displayPath":{"type":"string","description":"property of the object to take the display value from"},"valuePath":{"type":"string","description":"property of the object to take the option value from"},"sortBy":{"type":["string","array"],"items":{"type":"string"},"description":"one or more properties to sort the objects by"}}},"pagination":{"additionalProperties":false,"required":["source","type","params"],"properties":{"source":{"enum":["query","body"],"description":"Where the pagination parameters are written to. Only supports query parameters for now."},"type":{"enum":["buttons","infinite-scroll"],"description":"Type of pagination. Buttons is the standard one. You can also have a inifite scroll with lazy loading."},"params":{"$ref":"#/definitions/paginationParams"},"fields":{"$ref":"#/definitions/paginationFields"}}},"paginationParams":{"additionalProperties":false,"required":[],"properties":{"page":{"$ref":"#/definitions/queryParamConfig","description":"The parameter definition of the page number."},"limit":{"$ref":"#/definitions/queryParamConfig","description":"The parameter definition of the maximum number of items to be returned by the API."},"sortBy":{"$ref":"#/definitions/queryParamConfig","description":"The parameter definition of the sorting value."},"descending":{"$ref":"#/definitions/queryParamConfig","description":"The parameter definition of the order in which the API should return items. false by default."}}},"paginationFields":{"additionalProperties":false,"properties":{"page":{"$ref":"#/definitions/paginationField"},"total":{"$ref":"#/definitions/paginationField"}}},"paginationField":{"additionalProperties":false,"required":["dataPath"],"properties":{"dataPath":{"type":"string"},"display":{"type":"boolean"}}},"queryParamConfig":{"additionalProperties":false,"required":["name"],"properties":{"name":{"type":"string"},"value":{"type":"string"},"urlReplaceOnly":{"type":"boolean"},"label":{"type":"string"}}},"customAction":{"allOf":[{"$ref":"#/definitions/put"},{"type":"object","properties":{"icon":{"type":"string","description":"You may configure the icon of the action. RESTool uses font-awesome and you may use any icon name you want from their collection."}}}],"description":"Specifically customActions is a list of PUT or POST method objects. For example this could enable an endpoint like: PUT /users/:id/disable"},"customLabels":{"additionalProperties":false,"properties":{"buttons":{"$ref":"#/definitions/buttonLabels"},"formTitles":{"$ref":"#/definitions/formTitleLabels"},"placeholders":{"$ref":"#/definitions/placeholderLabels"},"tableColumnHeaders":{"$ref":"#/definitions/tableColumnHeaders"},"pagination":{"$ref":"#/definitions/paginationLabels"}}},"buttonLabels":{"additionalProperties":false,"properties":{"addItem":{"type":"string","description":"Content of the add button on a page.","default":"+ Add Item"},"editItem":{"type":"string","description":"Title of the edit button on a row or a card.","default":"Edit"},"deleteItem":{"type":"string","description":"Title of the delete button on a row or a card.","default":"Delete"},"clearInput":{"type":"string","description":"Title of the clear button on form inputs.","default":"Clear"},"closeForm":{"type":"string","description":"Title of the close button in forms.","default":"Close"},"addArrayItem":{"type":"string","description":"Title of the add button on arrays inputs in forms.","default":"Add Item"}}},"formTitleLabels":{"additionalProperties":false,"properties":{"addItem":{"type":"string","description":"Content of the add button on a page.","default":"Add Item"},"editItem":{"type":"string","description":"Title of the edit button on a row or a card.","default":"Edit Item"}}},"placeholderLabels":{"additionalProperties":false,"properties":{"object":{"type":"string","description":"JSON input placeholder.","default":"Enter JSON..."},"array":{"type":"string","description":"JSON array input placeholder.","default":"Enter JSON array..."},"text":{"type":"string","description":"Text input placeholder.","default":"Enter text..."},"number":{"type":"string","description":"Number input placeholder.","default":0},"color":{"type":"string","description":"Color input placeholder.","default":"Enter color..."},"email":{"type":"string","description":"Email input placeholder.","default":"Enter email..."},"password":{"type":"string","description":"Password input placeholder.","default":"Enter password..."},"date":{"type":"string","description":"Date input placeholder.","default":"Enter date..."},"file":{"type":"string","description":"File input placeholder.","default":"Select file..."}}},"tableColumnHeaders":{"additionalProperties":false,"properties":{"actions":{"type":"string","description":"Header of the action column in tables.","default":"Actions"}}},"paginationLabels":{"additionalProperties":false,"properties":{"itemsCount":{"type":"string","description":"","default":"Showing :currentCountFrom-:currentCountTo out of :totalCount items"},"previousPageTitle":{"type":"string","description":"","default":"Previous page"},"nextPageTitle":{"type":"string","description":"","default":"Next page"}}}}}')},131:function(e,t,a){},132:function(e,t,a){},133:function(e,t,a){},134:function(e,t,a){},135:function(e,t,a){},136:function(e,t,a){},138:function(e,t,a){},141:function(e,t,a){},142:function(e,t,a){},144:function(e,t,a){},145:function(e,t,a){},166:function(e,t,a){},167:function(e,t,a){},170:function(e,t,a){},171:function(e,t,a){},172:function(e,t,a){},174:function(e,t,a){},175:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),i=a(18),o=a.n(i),l=a(2),s=a.n(l),c=a(5),u=a(21),d=a(19),p=a(7),m=a(11),f=a(12),v=a(29),h=a(27),g=a(30),y=new(function(){function e(){Object(m.a)(this,e)}return Object(f.a)(e,[{key:"extractDataByDataPath",value:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(!e||!t)return a?e[a]:e;var n=e,r=t.split("."),i=!0,o=!1,l=void 0;try{for(var s,c=r[Symbol.iterator]();!(i=(s=c.next()).done);i=!0){var u=s.value;if("undefined"===typeof n[u])return null;n=n[u]}}catch(d){o=!0,l=d}finally{try{i||null==c.return||c.return()}finally{if(o)throw l}}return"undefined"===typeof n?null:a?n[a]:n}},{key:"checkIfFieldIsObject",value:function(e){return"object"===e.type||!("array"!==e.type||e.arrayType&&"object"!==e.arrayType)}},{key:"arrayToCSV",value:function(e){var t="object"!==typeof e?JSON.parse(e):e,a="".concat(Object.keys(t[0]).map((function(e){return'"'.concat(e,'"')})).join(","))+"\r\n";return t.reduce((function(e,t){return e+="".concat(Object.values(t).map((function(e){return'"'.concat(e,'"')})).join(","))+"\r\n"}),a)}}]),e}()),b=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";Object(m.a)(this,e),this.baseUrl=void 0,this.loginUrl=void 0,this.unauthorizedRedirectUrl=void 0,this.errorMessageDataPath=void 0,this.requestHeaders=void 0,this.baseUrl=t||"",this.loginUrl=r||"",this.unauthorizedRedirectUrl=a||"",this.errorMessageDataPath=n||"",this.requestHeaders={}}return Object(f.a)(e,[{key:"urlIsAbsolute",value:function(e){return 0===e.indexOf("http")||0===e.indexOf("https")}},{key:"replaceParamsInUrl",value:function(e,t){if(!t||"object"!==typeof t)return e;var a=e;return Object.keys(t).forEach((function(e){var n=":".concat(e);a=a.replace(n,t[e])})),a}},{key:"buildUrl",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],a=arguments.length>2?arguments[2]:void 0;if(!t||!t.length)return this.replaceParamsInUrl(e,a);var n=e,r=[],i="-1",o="10",l=!0,s=!1,c=void 0;try{for(var u,d=t[Symbol.iterator]();!(l=(u=d.next()).done);l=!0){var p=u.value,m="";p.name&&"undefined"!==typeof p.value&&("page"!==p.name?"limit"!==p.name?"tags"===p.name&&""===p.value||(m="info"===p.name?'{"$regex":"'+p.value+'","$options":"i"}':'"'+p.value+'"',r.push('"'.concat(p.name,'":{"$regex" : ').concat(m||"","}"))):o=p.value:i=p.value)}}catch(f){s=!0,c=f}finally{try{l||null==d.return||d.return()}finally{if(s)throw c}}return n+="?filter={"+r.join(",")+"}","-1"!=i&&(n+="&page="+i),n+="&limit="+o,console.log("Requested URL : "+n),n}},{key:"buildRequest",value:function(e){var t=this.urlIsAbsolute(e.origUrl)?e.origUrl:this.baseUrl+e.origUrl,a=this.buildUrl(t,e.queryParams,e.rawData),n=sessionStorage.getItem("diten-token")?{Authorization:sessionStorage.getItem("diten-token")}:{};return{url:a,params:{method:e.method?e.method.toUpperCase():"GET",headers:Object.assign(n,this.requestHeaders,e.headers||{}),body:"post"===e.method||"put"===e.method||"patch"===e.method?e.body:void 0}}}},{key:"getErrorMessage",value:function(e){var t,a,n,r,i,o,l,c,u;return s.a.async((function(d){for(;;)switch(d.prev=d.next){case 0:return t="",d.prev=1,d.next=4,s.a.awrap(e.json());case 4:for(a=d.sent,n=!0,r=!1,i=void 0,d.prev=8,o=this.errorMessageDataPath[Symbol.iterator]();!(n=(l=o.next()).done);n=!0)c=l.value,(u=y.extractDataByDataPath(a,c))&&(t=u);d.next=16;break;case 12:d.prev=12,d.t0=d.catch(8),r=!0,i=d.t0;case 16:d.prev=16,d.prev=17,n||null==o.return||o.return();case 19:if(d.prev=19,!r){d.next=22;break}throw i;case 22:return d.finish(19);case 23:return d.finish(16);case 24:d.next=28;break;case 26:d.prev=26,d.t1=d.catch(1);case 28:return d.abrupt("return",t&&t.length?t:"".concat(e.status," - ").concat(e.statusText||""));case 29:case"end":return d.stop()}}),null,this,[[1,26],[8,12,16,24],[17,,19,23]])}},{key:"handleError",value:function(e){var t;return s.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:if(401!==e.status||!this.unauthorizedRedirectUrl){a.next=5;break}return sessionStorage.clear(),t=this.unauthorizedRedirectUrl.replace(":returnUrl",encodeURIComponent(document.location.href)),document.location.replace(t),a.abrupt("return");case 5:return a.t0=Error,a.next=8,s.a.awrap(this.getErrorMessage(e));case 8:throw a.t1=a.sent,new a.t0(a.t1);case 10:case"end":return a.stop()}}),null,this)}},{key:"makeRequest",value:function(e){var t,a,n,r=arguments;return s.a.async((function(i){for(;;)switch(i.prev=i.next){case 0:return t=r.length>1&&void 0!==r[1]?r[1]:{},a=r.length>2&&void 0!==r[2]?r[2]:"json",i.next=4,s.a.awrap(fetch(e,Object.assign({},t,{})));case 4:if(!(n=i.sent).ok){i.next=17;break}i.t0=a,i.next="json"===i.t0?9:"text"===i.t0?12:"boolean"===i.t0?15:16;break;case 9:return i.next=11,s.a.awrap(n.json());case 11:return i.abrupt("return",i.sent);case 12:return i.next=14,s.a.awrap(n.text());case 14:return i.abrupt("return",i.sent);case 15:case 16:return i.abrupt("return",!0);case 17:return i.next=19,s.a.awrap(this.handleError(n));case 19:case"end":return i.stop()}}),null,this)}},{key:"fetch",value:function(e){var t,a,n,r,i,o,l,c,u,d;return s.a.async((function(p){for(;;)switch(p.prev=p.next){case 0:return t=e.method,a=e.origUrl,n=e.queryParams,r=e.rawData,i=e.body,o=e.headers,l=e.responseType,c=this.buildRequest({method:t,origUrl:a,queryParams:n,rawData:r,body:i,headers:o}),u=c.url,d=c.params,p.next=4,s.a.awrap(this.makeRequest(u,d,l));case 4:return p.abrupt("return",p.sent);case 5:case"end":return p.stop()}}),null,this)}}]),e}(),E=a(71),w=a.n(E),x=new b,P=new(function(e){function t(){return Object(m.a)(this,t),Object(v.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(g.a)(t,e),Object(f.a)(t,[{key:"getRemoteConfig",value:function(e){return s.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.endsWith(".js")){t.next=4;break}return t.next=3,s.a.awrap(import(e));case 3:return t.abrupt("return",t.sent.default);case 4:return t.next=6,s.a.awrap(x.fetch({origUrl:e}));case 6:return t.abrupt("return",t.sent);case 7:case"end":return t.stop()}}))}},{key:"loadDefaultConfig",value:function(){return s.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.a.awrap(this.getRemoteConfig("../../config.js"));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),null,this)}},{key:"validateConfig",value:function(e){if(null===e)return{isValid:!0,errorMessage:null};var t=a(118),n=new w.a({allErrors:!0,verbose:!0}).compile(t),r=n(e);if("boolean"!==typeof r)throw new Error("Unexpected asynchronous JSON validation");if(r)return{isValid:r,errorMessage:null};var i=n.errors?n.errors[0]:void 0,o=null;return o=(null===i||void 0===i?void 0:i.message)&&(null===i||void 0===i?void 0:i.dataPath)?'Error parsing configuration at "'.concat(i.dataPath,'": ').concat(i.message):(null===i||void 0===i?void 0:i.message)?"Error parsing configuration: ".concat(i.message):(null===i||void 0===i?void 0:i.dataPath)?'Error parsing configuration at "'.concat(i.dataPath,'"'):"Error parsing configuration",console.error(o),console.error("All configuration errors: ",n.errors),{isValid:r,errorMessage:o}}}]),t}(b)),j=a(10),O=a(9),k=a(72),N=a(36),S=a(16),C=r.a.createContext({config:null,activePage:null,error:null,setError:function(){},setActivePage:function(){},httpService:new b}),T=function(e){return function(t){return r.a.createElement(C.Consumer,null,(function(a){return r.a.createElement(e,Object.assign({},t,{context:a}))}))}},q=(a(131),function(){return r.a.createElement("div",{className:"app-loader cp-spinner cp-balls small"})}),I=new(function(){function e(){Object(m.a)(this,e)}return Object(f.a)(e,[{key:"hasPreviousPage",value:function(e){return void 0!==e&&("string"===typeof e?parseInt(e)>1:e>1)}},{key:"hasNextPage",value:function(e,t,a){return void 0===a||("string"===typeof e?parseInt(e):e)*("string"===typeof t?parseInt(t):t)<("string"===typeof a?parseInt(a):a)}}]),e}()),A=a(37),U=(a(132),function(e){return r.a.createElement("button",Object.assign({},e,{className:"button ".concat(e.className||""," ").concat(e.color||"")}),e.children)}),D=(a(133),function(){return r.a.createElement("div",{className:"app-infinite-loader cp-spinner cp-balls small"})}),_=(a(134),function(e){var t,a,n=e.callbacks,i=e.pagination,o=e.customLabels,l=(null===o||void 0===o?void 0:null===(t=o.pagination)||void 0===t?void 0:t.previousPageTitle)||"Previous page",s=(null===o||void 0===o?void 0:null===(a=o.pagination)||void 0===a?void 0:a.nextPageTitle)||"Next page";return r.a.createElement("div",{className:"pagination-wrapper"},r.a.createElement(U,{disabled:!i.hasPreviousPage,onClick:function(){return n.previousPage()},title:l},r.a.createElement("i",{className:"fa fa-arrow-left","aria-hidden":"true"})),r.a.createElement(U,{disabled:!i.hasNextPage,onClick:function(){return n.nextPage()},title:s},r.a.createElement("i",{className:"fa fa-arrow-right","aria-hidden":"true"})))}),R=(a(135),function(e){var t,a,i,o=e.items,l=e.fields,s=e.pagination,c=e.callbacks,u=e.customActions,d=e.customLabels,p=(null===d||void 0===d?void 0:null===(t=d.buttons)||void 0===t?void 0:t.editItem)||"Edit",m=(null===d||void 0===d?void 0:null===(a=d.buttons)||void 0===a?void 0:a.deleteItem)||"Delete",f=(null===d||void 0===d?void 0:null===(i=d.tableColumnHeaders)||void 0===i?void 0:i.actions)||"Actions",v={nextPage:c.getNextPage||function(){},previousPage:c.getPreviousPage||function(){}};function h(e,t){return r.a.createElement("tr",{key:"tr_".concat(t)},l.map((function(a,n){var i=y.extractDataByDataPath(e,a.dataPath,a.name);return r.a.createElement("td",{className:a.truncate?"truncate":"",key:"td_".concat(t,"_").concat(n)},function(e,t,a){if("boolean"===e.type&&(a=!!a),a&&"object"===typeof a)return"object";switch(e.type){case"text":return r.a.createElement("span",null,a);case"boolean":return r.a.createElement("div",{className:"bool ".concat(a?"true":"false")});case"image":return r.a.createElement("img",{src:a||"",alt:a||e.label||e.name});case"url":var n=e.url||a||"";return l.forEach((function(e){var a=y.extractDataByDataPath(t,e.dataPath,e.name);n=n.replace(":".concat(e.name),a)})),r.a.createElement("a",{href:n,target:"_blank",rel:"noopener noreferrer"},e.urlLabel||a);case"colorbox":return r.a.createElement("div",{className:"colorbox",style:{backgroundColor:a}});case"html":var i=(e.htmlCode||"<span>{value}</span>").replace("{value}",a);return r.a.createElement("div",{dangerouslySetInnerHTML:{__html:i}});default:return a}}(a,e,i))})),r.a.createElement("td",null,r.a.createElement("div",{className:"actions-wrapper"},c.put&&r.a.createElement(U,{onClick:function(){var t;return null===(t=c.put)||void 0===t?void 0:t.call(c,e)},title:p},r.a.createElement("i",{className:"fa fa-pencil-square-o","aria-hidden":"true"})),u&&u.length>0&&u.map((function(a,n){return r.a.createElement(U,{key:"action_".concat(t,"_").concat(n),onClick:function(){return c.action(e,a)},title:a.name},r.a.createElement("i",{className:"fa fa-".concat(a.icon||"cogs"),"aria-hidden":"true"}))})),c.delete&&r.a.createElement(U,{onClick:function(){var t;return null===(t=c.delete)||void 0===t?void 0:t.call(c,e)},title:m},r.a.createElement("i",{className:"fa fa-times","aria-hidden":"true"})))))}function g(){return r.a.createElement("table",{className:"pure-table"},r.a.createElement("thead",null,r.a.createElement("tr",null,l.map((function(e){return r.a.createElement("th",{key:"th_".concat(e.name)},e.label||e.name)})),r.a.createElement("th",null,f))),r.a.createElement("tbody",null,o.map(h)))}return Object(n.useEffect)((function(){"infinite-scroll"===(null===s||void 0===s?void 0:s.type)&&document.body.clientHeight<=window.innerHeight&&(null===s||void 0===s?void 0:s.hasNextPage)&&v.nextPage()}),[]),"infinite-scroll"===(null===s||void 0===s?void 0:s.type)?r.a.createElement(A.a,{dataLength:o.length,next:c.getNextPage||function(){return null},hasMore:(null===s||void 0===s?void 0:s.hasNextPage)||!1,loader:r.a.createElement(D,null)},g()):r.a.createElement("div",{className:"table-wrapper"},g(),s&&"buttons"===s.type&&r.a.createElement(_,{callbacks:v,pagination:s,customLabels:d}))}),B=a(73),L=a.n(B),$=(a(136),function(e){var t,a,i=e.items,o=e.fields,l=e.callbacks,s=e.customActions,c=e.customLabels,u=e.pagination,d=(null===c||void 0===c?void 0:null===(t=c.buttons)||void 0===t?void 0:t.editItem)||"Edit",p=(null===c||void 0===c?void 0:null===(a=c.buttons)||void 0===a?void 0:a.deleteItem)||"Delete",m={nextPage:l.getNextPage||function(){},previousPage:l.getPreviousPage||function(){}};function f(e,t){return r.a.createElement("div",{className:"actions-wrapper"},l.put&&r.a.createElement(U,{onClick:function(){var t;return null===(t=l.put)||void 0===t?void 0:t.call(l,e)},title:d},r.a.createElement("i",{className:"fa fa-pencil-square-o","aria-hidden":"true"})),s&&s.length>0&&s.map((function(a,n){return r.a.createElement(U,{key:"action_".concat(t,"_").concat(n),onClick:function(){return l.action(e,a)},title:a.name},r.a.createElement("i",{className:"fa fa-".concat(a.icon||"cogs"),"aria-hidden":"true"}))})),l.delete&&r.a.createElement(U,{onClick:function(){var t;return null===(t=l.delete)||void 0===t?void 0:t.call(l,e)},title:p},r.a.createElement("i",{className:"fa fa-times","aria-hidden":"true"})))}function v(e,t){return r.a.createElement("div",{className:"card",key:"card_".concat(t)},o.map((function(a,n){var i=y.extractDataByDataPath(e,a.dataPath,a.name);return r.a.createElement("div",{className:"card-row ".concat(a.type),key:"card_".concat(t,"_").concat(n)},"image"!==a.type&&r.a.createElement("label",null,a.label||a.name,": "),function(e,t,a){if("boolean"===e.type&&(a=!!a),a&&"object"===typeof a)return"object";switch(e.type){case"text":return r.a.createElement("span",null,a);case"boolean":return r.a.createElement("div",{className:"bool ".concat(a?"true":"false")});case"image":return a?r.a.createElement("img",{src:a||"",alt:a||e.label||e.name}):r.a.createElement(r.a.Fragment,null);case"url":var n=e.url||a||"";return o.forEach((function(e){var a=y.extractDataByDataPath(t,e.dataPath,e.name);n=n.replace(":".concat(e.name),a)})),r.a.createElement("a",{href:n,target:"_blank",rel:"noopener noreferrer"},e.urlLabel||a);case"colorbox":return r.a.createElement("div",{className:"colorbox",style:{backgroundColor:a}});case"html":var i=(e.htmlCode||"<span>{value}</span>").replace("{value}",a);return r.a.createElement("div",{dangerouslySetInnerHTML:{__html:i}});default:return a}}(a,e,i))})),f(e,t))}function h(e){return r.a.createElement("div",{className:"card",key:"card_".concat(e)},o.map((function(t,a){return r.a.createElement("div",{className:"card-row ".concat(t.type),key:"card_".concat(e,"_").concat(a)},"image"!==t.type&&r.a.createElement("label",null,t.label||t.name,": "),r.a.createElement(L.a,{duration:.6}))})),f({},e))}return Object(n.useEffect)((function(){"infinite-scroll"===(null===u||void 0===u?void 0:u.type)&&document.body.clientHeight<=window.innerHeight&&l.getNextPage&&(null===u||void 0===u?void 0:u.hasNextPage)&&l.getNextPage()}),[]),"infinite-scroll"===(null===u||void 0===u?void 0:u.type)?r.a.createElement(A.a,{className:"cards-wrapper",dataLength:i.length,next:l.getNextPage||function(){return null},hasMore:(null===u||void 0===u?void 0:u.hasNextPage)||!1,loader:function(){var e=i.length;return Array.from(Array(null===u||void 0===u?void 0:u.limit).keys()).map((function(t){return t+e})).map(h)}()},i.map(v)):r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"cards-wrapper"},i.map(v)),u&&"buttons"===u.type&&r.a.createElement(_,{callbacks:m,pagination:u}))}),M=a(35),H=a(3),F=a.n(H),z=(a(138),T((function(e){var t,a,i=e.context,o=e.field,l=e.direction,u=e.showReset,d=e.onChange,m=Object(n.useState)({}),f=Object(c.a)(m,2),v=f[0],h=f[1],g=i.httpService,b=i.activePage,E=i.config,w=(null===b||void 0===b?void 0:b.requestHeaders)||{},x=Object(O.a)({},null===E||void 0===E?void 0:E.customLabels,{},null===b||void 0===b?void 0:b.customLabels),P=(null===x||void 0===x?void 0:null===(t=x.buttons)||void 0===t?void 0:t.addArrayItem)||"Add Item",k=(null===x||void 0===x?void 0:null===(a=x.buttons)||void 0===a?void 0:a.clearInput)||"Clear";function S(e){var t=e.value||[];return r.a.createElement("div",{className:"array-form"},t.map((function(t,a){var n=C({value:t,name:"".concat(e.name,".").concat(a)},(function(t,n){var r=(e.value||[]).map((function(e,t){return t===a?n:e}));d(e.name,r)}));return r.a.createElement("div",{className:"array-form-item",key:"array_form_".concat(a)},n,r.a.createElement("i",{title:k,onClick:function(){return function(e,t){var a=Object(j.a)(e.value||[]);a.splice(t,1),d(o.name,a)}(e,a)},"aria-label":"Remove",className:"clear-input fa fa-times"}))})),r.a.createElement(U,{className:"add-array-item",onClick:function(t){return function(e,t){e.preventDefault(),d(o.name,[].concat(Object(j.a)(t.value||[]),[""]))}(t,e)},title:P},r.a.createElement("i",{className:"fa fa-plus","aria-hidden":"true"})))}function C(e,t){var a,n,i,o,l,c,u,d,m,f=function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return{value:e.value,placeholder:e.placeholder||a,disabled:e.readonly,required:e.required,onChange:function(a){return t(e.name,a.target.value)}}};switch(e.type){case"boolean":return r.a.createElement("input",Object.assign({type:"checkbox"},f(),{checked:e.value,onChange:function(a){return t(e.name,a.target.checked,!0)}}));case"select":var b,E=e.optionSource;if(E&&!v[e.name])return function(e,t){var a,n,r,i,o,l,c;s.a.async((function(u){for(;;)switch(u.prev=u.next){case 0:if(u.prev=0,a=t.url,n=t.dataPath,r=t.actualMethod,i=t.requestHeaders,a){u.next=4;break}throw new Error('URL option source (for field "'.concat(e,'") is empty.'));case 4:return u.next=6,s.a.awrap(g.fetch({method:r||"get",origUrl:a,queryParams:[],headers:Object.assign({},w,i||{})}));case 6:if(o=u.sent,(l=y.extractDataByDataPath(o,n))&&l.length){u.next=10;break}throw new Error('Option source data is empty (for field "'.concat(e,'")'));case 10:c=l.map((function(e,a){var n=t.valuePath,r=t.displayPath;return"string"===typeof e?e:{display:r&&e[r]?e[r]:"Option ".concat(a+1),value:n&&e[n]?e[n]:"".concat(a)}})),h(Object(O.a)({},v,Object(M.a)({},e,c))),u.next=17;break;case 14:u.prev=14,u.t0=u.catch(0),p.b.error(u.t0.message);case 17:case"end":return u.stop()}}),null,null,[[0,14]])}(e.name,E),r.a.createElement("select",f(),r.a.createElement("option",null,"-- Loading Options... --"));var P=null===(b=e.optionSource)||void 0===b?void 0:b.sortBy,j=v[e.name]||e.options||[],k=Object(N.a)(j,"string"===typeof P?[P]:P||[]);return r.a.createElement("select",f(),r.a.createElement("option",null,F.a.select),k.map((function(e,t){var a="option_".concat(t,"_");return"object"!==typeof e?r.a.createElement("option",{key:"".concat(a,"_").concat(e),value:e},e):r.a.createElement("option",{key:"".concat(a,"_").concat(e.value),value:e.value},e.display||e.value)})));case"object":return r.a.createElement("textarea",f((null===x||void 0===x?void 0:null===(a=x.placeholders)||void 0===a?void 0:a.object)||"Enter JSON..."));case"array":var C,T=e.arrayType;return e.value&&T&&"object"!==T?S(e):r.a.createElement("textarea",f((null===x||void 0===x?void 0:null===(C=x.placeholders)||void 0===C?void 0:C.array)||"Enter JSON array..."));case"long-text":return r.a.createElement("textarea",f((null===x||void 0===x?void 0:null===(n=x.placeholders)||void 0===n?void 0:n.text)||F.a.enter_text));case"number":case"integer":return r.a.createElement("input",Object.assign({type:"number"},f((null===x||void 0===x?void 0:null===(i=x.placeholders)||void 0===i?void 0:i.number)||"0"),{onChange:function(a){return t(e.name,a.target.valueAsNumber)}}));case"color":return r.a.createElement("input",Object.assign({type:"color"},f((null===x||void 0===x?void 0:null===(o=x.placeholders)||void 0===o?void 0:o.color)||"Enter color...")));case"email":return r.a.createElement("input",Object.assign({type:"email"},f((null===x||void 0===x?void 0:null===(l=x.placeholders)||void 0===l?void 0:l.email)||"Enter email...")));case"password":return r.a.createElement("input",Object.assign({type:"password"},f((null===x||void 0===x?void 0:null===(c=x.placeholders)||void 0===c?void 0:c.password)||"Enter password...")));case"hidden":return r.a.createElement("input",{type:"hidden",value:e.value});case"file":return r.a.createElement("input",{type:"file",accept:e.accept||"*",placeholder:e.placeholder||(null===x||void 0===x?void 0:null===(u=x.placeholders)||void 0===u?void 0:u.file)||"Select file...",name:e.name||"file",disabled:e.readonly,required:e.required});case"note":return r.a.createElement("p",{className:"note"},e.value);case"date":return r.a.createElement("input",Object.assign({type:"date"},f((null===x||void 0===x?void 0:null===(d=x.placeholders)||void 0===d?void 0:d.date)||"Enter date...")));case"text":default:return r.a.createElement("input",Object.assign({type:"text"},f((null===x||void 0===x?void 0:null===(m=x.placeholders)||void 0===m?void 0:m.text)||F.a.enter_text)))}}return r.a.createElement("div",{className:"form-row ".concat(l||"row")},"hidden"!==o.type&&r.a.createElement("label",null,o.label||o.originalName,o.required?" *":""),C(o,d),u&&!o.readonly&&o.value&&o.value.length>0&&r.a.createElement("i",{title:k,onClick:function(){return d(o.name,"",!0)},"aria-label":"Clear",className:"clear-input fa fa-times"}))}))),J=(a(61),function(e){var t=e.initialParams,a=e.paginationConfig,i=e.submitCallback,o=Object(n.useState)(t),l=Object(c.a)(o,2),s=l[0],u=l[1];function d(e){e&&e.preventDefault(),a&&"infinite-scroll"===a.type?i(s,!0):i(s)}function p(e,t,a){var n=Object(j.a)(s).map((function(a){return a.name===e&&(a.value=t),a}));u(n),a&&d()}return Object(n.useEffect)((function(){if(a&&"infinite-scroll"===a.type){var e=t.filter((function(e){return!["page","limit"].includes(e.name)}));u(e)}else u(t)}),[a,t]),s.length?r.a.createElement("section",{className:"query-params-form"},r.a.createElement("h5",null,F.a.search),r.a.createElement("form",{onSubmit:d},s.map((function(e,t){return r.a.createElement(z,{key:"query_param_".concat(t),field:e,onChange:p,showReset:!e.type||"text"===e.type})})),r.a.createElement(U,{type:"submit",onClick:d},F.a.submit))):r.a.createElement(r.a.Fragment,null)}),G=(a(141),document.getElementById("popup-portal"));G||((G=document.createElement("div")).setAttribute("id","popup-portal"),document.body.append(G));var W=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(v.a)(this,Object(h.a)(t).call(this,e))).el=void 0,a.componentDidMount=function(){G.appendChild(a.el)},a.componentWillUnmount=function(){G.removeChild(a.el)},a.el=document.createElement("div"),a}return Object(g.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){return o.a.createPortal(this.props.children,this.el)}}]),t}(n.Component),Q=function(e){function t(){var e,a;Object(m.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(v.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r))))._handleKeyDown=function(e){var t=a.props,n=t.show,r=t.closeCallback;n&&27===e.keyCode&&r(e)},a}return Object(g.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){var e,t,a=this,n=Object.assign({},{display:this.props.show?"block":"none"},this.props.style||{}),i=(null===(e=this.props.customLabels)||void 0===e?void 0:null===(t=e.buttons)||void 0===t?void 0:t.closeForm)||"Close";return r.a.createElement(W,null,this.props.show?r.a.createElement("div",{className:"popup ".concat(this.props.className||""),style:n},r.a.createElement("div",{className:"overlay",onClick:function(e){return a.props.closeCallback(e)}}),r.a.createElement("div",{className:"popup-content",ref:this.props.refCallback},this.props.children,r.a.createElement("button",{title:i,className:"close-popup",onClick:function(e){return a.props.closeCallback(e)}},r.a.createElement("i",{className:"fa fa-times","aria-hidden":"true"})))):null)}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this._handleKeyDown.bind(this))}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this._handleKeyDown.bind(this))}}]),t}(n.Component),Y=new(function(){function e(){Object(m.a)(this,e)}return Object(f.a)(e,[{key:"isMultipartForm",value:function(e){for(var t in e){if("file"===e[t].type)return!0}return!1}}]),e}()),V=(a(142),a(62).unflatten),K=T((function(e){var t=e.context,a=e.title,i=e.fields,o=e.rawData,l=e.getSingleConfig,u=e.methodConfig,d=e.submitCallback,m=e.closeCallback,f=JSON.parse(JSON.stringify(i)),v=t.httpService,h=t.activePage,g=t.config,b=Object(n.useState)(!0),E=Object(c.a)(b,2),w=E[0],x=E[1],P=Object(n.useState)([]),j=Object(c.a)(P,2),k=j[0],N=j[1],S=Object(n.useState)(null),C=Object(c.a)(S,2),T=C[0],I=C[1],A=(null===h||void 0===h?void 0:h.requestHeaders)||{},D=Object(O.a)({},null===g||void 0===g?void 0:g.customLabels,{},null===h||void 0===h?void 0:h.customLabels);function _(e){var t,a,n,r,i,o;return s.a.async((function(l){for(;;)switch(l.prev=l.next){case 0:if(e.preventDefault(),t=u.includeOriginalFields?Object.assign({},T):{},a=new FormData,n=Y.isMultipartForm(k),r=null,i=[],k.forEach((function(o){if("file"!==o.type){if(t[o.name]=o.value,n&&!o.useInUrl&&a.append(o.name,o.value),o.required&&"boolean"!==o.type&&!o.value&&0!=o.value&&(r="Please fill up all required fields."),y.checkIfFieldIsObject(o)&&o.value)try{t[o.name]=JSON.parse(o.value)}catch(e){r='Invalid JSON for field "'.concat(o.name,'".')}"boolean"===o.type&&(t[o.name]=o.value||!1),"encode"===o.type&&(t[o.name]=encodeURIComponent(o.value)),o.useInUrl&&i.push({name:o.name,value:o.value})}else{var l=document.querySelector('input[name="'.concat(o.name||"file",'"]'));if(l.files.length>0){var s=l.files[0];a.append(o.name||"file",s,s.name)}}})),!r){l.next=10;break}return p.b.error(r),l.abrupt("return");case 10:return x(!0),l.prev=11,o=n?a:V(t),l.next=15,s.a.awrap(d(o,n,i));case 15:p.b.success("Great Success!"),m(!0),l.next=22;break;case 19:l.prev=19,l.t0=l.catch(11),p.b.error(l.t0.message);case 22:x(!1);case 23:case"end":return l.stop()}}),null,null,[[11,19]])}function R(e,t){var a=JSON.parse(JSON.stringify(k));a=a.map((function(a){return a.name===e&&(a.value=t),a})),N(a)}return Object(n.useEffect)((function(){!function(){var e,t,a,n,r,i,c,u,d,m;s.a.async((function(h){for(;;)switch(h.prev=h.next){case 0:if(e=o||{},!l||!l.url){h.next=19;break}return h.prev=2,t=l.url,a=l.requestHeaders,n=l.actualMethod,r=l.dataPath,i=l.queryParams,c=l.responseType,u=l.dataTransform,h.next=6,s.a.awrap(v.fetch({method:n||"get",origUrl:t,queryParams:i,headers:Object.assign({},A,a||{}),rawData:o,responseType:c}));case 6:if(d=h.sent,m=y.extractDataByDataPath(d,r),"function"!==typeof u){h.next=12;break}return h.next=11,s.a.awrap(u(m));case 11:m=h.sent;case 12:!m||"object"!==typeof m&&"string"!==typeof m||(e=m),h.next=19;break;case 15:h.prev=15,h.t0=h.catch(2),console.error("Could not load single item's data.",h.t0),p.b.error("Could not load single item's data.");case 19:I(e),N(f.map((function(t){var a=t.name;t.originalName=t.name;var n=[];t.dataPath&&(n=t.dataPath.split("."),a="".concat(t.dataPath,".").concat(t.name));var r=function(){var a=e,r=!0,i=!1,o=void 0;try{for(var l,s=n[Symbol.iterator]();!(r=(l=s.next()).done);r=!0){var c=l.value;if(void 0===a[c]||null===a[c])return;a=a[c]}}catch(u){i=!0,o=u}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return a[t.name]}();return t.name=a,y.checkIfFieldIsObject(t)?((r||t.value)&&(t.value=JSON.stringify(r||t.value,null,"  ")||""),t):"array"===t.type?(t.value=r||t.value||[],t):(t.value="undefined"!==typeof r?r:"undefined"===typeof t.value?"":t.value,"long-text"!==t.type&&"text"!==t.type||"string"!==typeof e||(t.value=e),t)}))),x(!1);case 22:case"end":return h.stop()}}),null,null,[[2,15]])}()}),[]),r.a.createElement(Q,{show:!0,className:"form-popup",closeCallback:function(){return m(!1)},customLabels:D},r.a.createElement(r.a.Fragment,null,r.a.createElement("h2",null,a),r.a.createElement("section",null,w?r.a.createElement(q,null):r.a.createElement("form",{onSubmit:_},k.map((function(e,t){return r.a.createElement("div",null,r.a.createElement(z,{key:"field_".concat(t),field:e,onChange:R,showReset:!e.type||"text"===e.type}),r.a.createElement("br",null),r.a.createElement("hr",null))})),r.a.createElement("div",{className:"buttons-wrapper center"},r.a.createElement(U,{type:"submit",onClick:_,color:"green"},F.a.submit))))))})),X=(a(144),function(e){var t=e.onChange;return r.a.createElement("section",{className:"filter-wrapper"},r.a.createElement("h5",null,"Filter:"),r.a.createElement("div",{className:"form-row"},r.a.createElement("input",{type:"text",placeholder:"Search...",onChange:function(e){return t(e.target.value.toLowerCase())}})))}),Z=function(e){return"query"===e.source},ee=function(e){return"body"===e.source},te=function(e){return"query"===e.source},ae=function(e){return"body"===e.source},ne=(a(145),a(22)),re=(a(166),T((function(e){var t=e.dataMat;return Object(n.useEffect)((function(){console.log(t)}),[]),r.a.createElement("div",{className:"graphHolder"},r.a.createElement("br",null),r.a.createElement("hr",null),r.a.createElement("br",null),t.map((function(e){return r.a.createElement("div",null,r.a.createElement("h2",null,e.nameStruct),r.a.createElement("br",null),r.a.createElement(ne.e,{width:1400,height:600,xType:"ordinal"},r.a.createElement(ne.c,null),r.a.createElement(ne.a,null),r.a.createElement(ne.d,{title:"t",tickFormat:function(e){console.log(e);var t=new Date(+e);return console.log(t),t.toString().substr(4,20)}}),r.a.createElement(ne.f,{title:e.unitMeasure}),r.a.createElement(ne.b,{data:e.dataStruct})),r.a.createElement("br",null),r.a.createElement("hr",null),r.a.createElement("br",null))})))}))),ie=(a(167),a(62).unflatten,T((function(e){var t=e.context,a=e.title,i=e.fields,o=e.graphConfig,l=e.closeCallback,u=JSON.parse(JSON.stringify(i)),d=t.httpService,p=t.activePage,m=t.config,f=Object(n.useState)(!0),v=Object(c.a)(f,2),h=v[0],g=v[1],b=Object(n.useState)(!0),E=Object(c.a)(b,2),w=E[0],x=E[1],P=Object(n.useState)(!0),k=Object(c.a)(P,2),N=k[0],S=k[1],C=Object(n.useState)(a),T=Object(c.a)(C,2),I=T[0],A=T[1],D=(null===p||void 0===p?void 0:p.requestHeaders)||{},_=Object(n.useState)(u),R=Object(c.a)(_,2),B=R[0],L=R[1],$=Object(n.useState)(),M=Object(c.a)($,2),H=M[0],J=M[1],G=Object(O.a)({},null===m||void 0===m?void 0:m.customLabels,{},null===p||void 0===p?void 0:p.customLabels);function W(e,t,a){var n=Object(j.a)(B).map((function(a){return a.name===e&&(a.value=t),a}));L(n),a&&Y()}function Y(){var e,t,a,n,r,i,l,c,u,p;return s.a.async((function(m){for(;;)switch(m.prev=m.next){case 0:return console.log(B.map((function(e){return e.value}))),g(!0),x(!0),m.next=5,s.a.awrap(d.fetch({method:"get",origUrl:o.url,queryParams:B,headers:D}));case 5:return e=m.sent,"",B.map((function(e){return"feature"===e.name?e.value:{}})),m.next=10,s.a.awrap(d.fetch({method:"get",origUrl:"/features/",queryParams:B.filter((function(e){return"feature"===e.name&&(e.name="_id")})),headers:D}));case 10:if(t=m.sent,a=y.extractDataByDataPath(e,o.dataPath),n=y.extractDataByDataPath(t,"docs"),console.log(n),r=new Array,i=new Array,l=new Array,console.log(r),n.map((function(e){return e.items.map((function(e,t){0===e.dimension&&"number"===e.type&&(r.push(t),i.push(e.name),l.push(e.unit))}))})),0!==r.length){m.next=22;break}return console.log("No features to plot"),m.abrupt("return");case 22:for(console.log("Goodfeatures.lenght : "+r.length),console.log("Graph Config"),console.log(o),console.log("Query results"),console.log(e),console.log("Extracted data"),console.log(a),console.log("Extracted feature"),console.log(n),c=new Array(r.length),console.log(c),u=0;u<c.length;u++)c[u]=new Array;for(console.log(c),console.log("Samples"),a.map((function(e){return e.samples.map((function(t){return t.values.map((function(t,a){r.includes(a)&&c[r.indexOf(a)].push({x:Date.parse(e.startDate),y:t})}))}))})),p=Array(),u=0;u<i.length;u++)p[u]={nameStruct:i[u],dataStruct:c[u],unitMeasure:l[u]};J(p),console.log(p),S(!0),A(F.a.graph+" "+n[0]._id),g(!1);case 44:case"end":return m.stop()}}))}return Object(n.useEffect)((function(){g(!1),x(!1),S(!1)}),[]),r.a.createElement(Q,{show:!0,className:"graph-popup",closeCallback:function(){return l(!1)},customLabels:G},r.a.createElement(r.a.Fragment,null,r.a.createElement("h2",null,I),h?r.a.createElement(q,null):w?N?r.a.createElement(re,{dataMat:H}):r.a.createElement("h1",null,"Nessun grafico da mostrare"):r.a.createElement("section",{className:"query-params-form"},r.a.createElement("h5",null,F.a.graph),r.a.createElement("form",{onSubmit:Y},B.map((function(e,t){return r.a.createElement(z,{key:"query_param_".concat(t),field:e,onChange:W,showReset:!e.type||"text"===e.type})})),r.a.createElement(U,{type:"submit",onClick:Y},F.a.submit)))))}))),oe=function(e,t){var a=void 0;if(t)if(te(t)){var n,r,i,o,l,s,c,u,d,p,m,f,v,h,g,y,b,E,w;if(a={source:t.source,type:t.type,page:parseInt((null===(n=t.params)||void 0===n?void 0:null===(r=n.page)||void 0===r?void 0:r.value)||"1"),limit:parseInt((null===(i=t.params)||void 0===i?void 0:null===(o=i.limit)||void 0===o?void 0:o.value)||"10"),descending:"true"===(null===(l=t.params)||void 0===l?void 0:null===(s=l.descending)||void 0===s?void 0:s.value)||!1,hasPreviousPage:!1,hasNextPage:!1,sortBy:null===(c=t.params)||void 0===c?void 0:null===(u=c.sortBy)||void 0===u?void 0:u.value},!Object(S.find)(e,{name:"page"}))e.push({name:null===t||void 0===t?void 0:null===(f=t.params)||void 0===f?void 0:null===(v=f.page)||void 0===v?void 0:v.name,label:(null===t||void 0===t?void 0:null===(h=t.params)||void 0===h?void 0:null===(g=h.page)||void 0===g?void 0:g.label)||"Page",value:null===(y=a)||void 0===y?void 0:y.page});if((null===t||void 0===t?void 0:null===(d=t.params)||void 0===d?void 0:d.limit)&&!Object(S.find)(e,{name:"limit"}))e.push({name:t.params.limit.name,label:t.params.limit.label||"Limit",value:null===(b=a)||void 0===b?void 0:b.limit});if((null===t||void 0===t?void 0:null===(p=t.params)||void 0===p?void 0:p.descending)&&!Object(S.find)(e,{name:"descending"}))e.push({name:t.params.descending.name,label:t.params.descending.label||"Descending",value:null===(E=a)||void 0===E?void 0:E.descending});if((null===t||void 0===t?void 0:null===(m=t.params)||void 0===m?void 0:m.sortBy)&&!Object(S.find)(e,{name:"sortBy"}))e.push({name:t.params.sortBy.name,label:"Sort by",value:null===(w=a)||void 0===w?void 0:w.sortBy})}else{if(!ae(t))throw new Error("unrecognized pagination");var x,P,j,O;a={source:"body",type:t.type,hasNextPage:!1,hasPreviousPage:!1,next:null,previous:null,limit:parseInt((null===(x=t.params)||void 0===x?void 0:null===(P=x.limit)||void 0===P?void 0:P.value)||"10")},(null===t||void 0===t?void 0:null===(j=t.params)||void 0===j?void 0:j.limit)&&!Object(S.find)(e,{name:"limit"})&&e.push({name:t.params.limit.name,label:t.params.limit.label||"Limit",value:null===(O=a)||void 0===O?void 0:O.limit})}return{initQueryParams:e,initialPagination:a}},le=T((function(e){var t,a,i,o,l,u=e.context,m=Object(d.h)().page,f=Object(d.g)(),v=f.push,h=f.location,g=u.activePage,b=u.error,E=u.setError,w=u.httpService,x=u.config,P=(null===g||void 0===g?void 0:g.requestHeaders)||{},C=null===g||void 0===g?void 0:g.methods,T=(null===g||void 0===g?void 0:g.customActions)||[],A=null===C||void 0===C?void 0:C.getAll,D=null===A||void 0===A?void 0:A.pagination,_="infinite-scroll"===(null===D||void 0===D?void 0:D.type),B=null===C||void 0===C?void 0:C.getSingle,L=null===C||void 0===C?void 0:C.post,M=null===C||void 0===C?void 0:C.graph,H=null===C||void 0===C?void 0:C.put,z=null===C||void 0===C?void 0:C.delete,G=Object(O.a)({},null===x||void 0===x?void 0:x.customLabels,{},null===g||void 0===g?void 0:g.customLabels),W=(null===G||void 0===G?void 0:null===(t=G.buttons)||void 0===t?void 0:t.addItem)||"+ "+F.a.add+" "+(null===g||void 0===g?void 0:g.itemName),Q=F.a.graph+" "+(null===g||void 0===g?void 0:g.itemName),Y=(null===G||void 0===G?void 0:null===(a=G.formTitles)||void 0===a?void 0:a.addItem)||F.a.add+" "+(null===g||void 0===g?void 0:g.itemName),V=(null===G||void 0===G?void 0:null===(i=G.formTitles)||void 0===i?void 0:i.editItem)||F.a.update+" "+(null===g||void 0===g?void 0:g.itemName),ne=F.a.graph+" "+(null===g||void 0===g?void 0:g.itemName),re=oe((null===A||void 0===A?void 0:A.queryParams)||[],D),le=re.initQueryParams,se=re.initialPagination,ce=Object(n.useState)(!1),ue=Object(c.a)(ce,2),de=ue[0],pe=ue[1],me=Object(n.useState)(null),fe=Object(c.a)(me,2),ve=fe[0],he=fe[1],ge=Object(n.useState)(null),ye=Object(c.a)(ge,2),be=ye[0],Ee=ye[1],we=Object(n.useState)(le),xe=Object(c.a)(we,2),Pe=xe[0],je=xe[1],Oe=Object(n.useState)(se),ke=Object(c.a)(Oe,2),Ne=ke[0],Se=ke[1],Ce=Object(n.useState)([]),Te=Object(c.a)(Ce,2),qe=Te[0],Ie=Te[1],Ae=Object(n.useState)(""),Ue=Object(c.a)(Ae,2),De=Ue[0],_e=Ue[1];function Re(e){return s.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:he({rawData:e,type:"update",title:V,config:H,getSingleConfig:B,submitCallback:function(t,a){return s.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,s.a.awrap(Fe(t,e,a));case 2:return n.abrupt("return",n.sent);case 3:case"end":return n.stop()}}))}});case 2:case"end":return t.stop()}}))}function Be(e,t){var a={rawData:e,type:"action",title:t.name||"Custom Action",config:t,submitCallback:function(a,n){return s.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,s.a.awrap(Le(a,e,t,n));case 2:return r.abrupt("return",r.sent);case 3:case"end":return r.stop()}}))}};he(a)}function Le(e,t,a,n){var r,i,o;return s.a.async((function(l){for(;;)switch(l.prev=l.next){case 0:return r=a.url,i=a.requestHeaders,o=a.actualMethod,l.next=3,s.a.awrap(w.fetch({method:o||"put",origUrl:r,rawData:t,body:n?e:JSON.stringify(e),headers:Object(O.a)({},P,{},i||{},{},n?{}:{"content-type":"application/json"}),responseType:"boolean"}));case 3:return l.abrupt("return",l.sent);case 4:case"end":return l.stop()}}))}function $e(e){var t,a,n,r,i,o;return s.a.async((function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,s.a.awrap(w.fetch({method:e.actualMethod||"get",origUrl:e.url,queryParams:Pe,headers:Object.assign({},P,e.requestHeaders||{})}));case 2:if(t=l.sent,a=y.extractDataByDataPath(t,e.dataPath)){l.next=6;break}throw new Error("Could not extract data from response.");case 6:if(Array.isArray(a)){l.next=8;break}throw new Error("Extracted data is invalid.");case 8:if("function"!==typeof e.dataTransform){l.next=12;break}return l.next=11,s.a.awrap(e.dataTransform(a));case 11:a=l.sent;case 12:n=Object(N.a)(a,"string"===typeof e.sortBy?[e.sortBy]:e.sortBy||[]),D&&(i=(null===(r=D.fields)||void 0===r?void 0:r.total)?y.extractDataByDataPath(t,D.fields.total.dataPath):void 0,(o=Ge(Pe,t,i))&&Se(o)),Ie(_?[].concat(Object(j.a)(qe),Object(j.a)(n)):n);case 15:case"end":return l.stop()}}))}function Me(){var e,t,a,n,r,i;return s.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:if(!_){o.next=13;break}if(!Ne){o.next=11;break}if(!Z(Ne)){o.next=6;break}1!==(null===Ne||void 0===Ne?void 0:Ne.page)&&pe(!1),o.next=11;break;case 6:if(!ee(Ne)){o.next=10;break}Ne.previous&&pe(!1),o.next=11;break;case 10:throw new Error("unrecognized pagination source");case 11:o.next=14;break;case 13:pe(!0);case 14:if(E(null),o.prev=15,A){o.next=18;break}throw new Error("Get all method is not defined.");case 18:if(!D||Ne){o.next=20;break}throw new Error("Pagination not initialized.");case 20:return e=A.url,t=A.requestHeaders,a=A.actualMethod,n=A.dataPath,r=A.sortBy,i=A.dataTransform,o.next=23,s.a.awrap($e({actualMethod:a,url:e,requestHeaders:t,dataPath:n,dataTransform:i,sortBy:r}));case 23:o.next=28;break;case 25:o.prev=25,o.t0=o.catch(15),E(o.t0.message);case 28:pe(!1);case 29:case"end":return o.stop()}}),null,null,[[15,25]])}function He(e,t,a){var n,r,i;return s.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:if(L){o.next=2;break}throw new Error("Post method is not defined.");case 2:return n=L.url,r=L.requestHeaders,i=L.actualMethod,o.next=5,s.a.awrap(w.fetch({method:i||"post",origUrl:n,queryParams:a,body:t?e:JSON.stringify(e),headers:Object(O.a)({},P,{},r||{},{},t?{}:{"content-type":"application/json"}),responseType:"boolean"}));case 5:return o.abrupt("return",o.sent);case 6:case"end":return o.stop()}}))}function Fe(e,t,a){var n,r,i;return s.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:if(H){o.next=2;break}throw new Error("Put method is not defined.");case 2:return n=H.url,r=H.requestHeaders,i=H.actualMethod,o.next=5,s.a.awrap(w.fetch({method:i||"put",origUrl:n,rawData:t,body:a?e:JSON.stringify(e),headers:Object(O.a)({},P,{},r||{},{},a?{}:{"content-type":"application/json"}),responseType:"boolean"}));case 5:return o.abrupt("return",o.sent);case 6:case"end":return o.stop()}}))}function ze(e){var t,a,n,r;return s.a.async((function(i){for(;;)switch(i.prev=i.next){case 0:if(window.confirm("Are you sure you want to delete this item?")){i.next=3;break}return i.abrupt("return");case 3:if(i.prev=3,z){i.next=6;break}throw new Error("Delete method is not defined.");case 6:return t=z.url,a=z.requestHeaders,n=z.actualMethod,i.next=9,s.a.awrap(w.fetch({method:n||"delete",origUrl:t,rawData:e,headers:Object.assign({},P,a||{}),responseType:"boolean"}));case 9:i.sent&&("infinite-scroll"===(null===Ne||void 0===Ne?void 0:Ne.type)?(Ie([]),r=Object(j.a)(Pe),Object(S.remove)(r,(function(e){return["page","limit"].includes(e.name)})),je(oe(r,D).initQueryParams)):Me()),i.next=16;break;case 13:i.prev=13,i.t0=i.catch(3),p.b.error(i.t0.message);case 16:case"end":return i.stop()}}),null,null,[[3,13]])}function Je(e,t){if(!de){t&&(Ie([]),Object(S.remove)(e,(function(e){return["page","limit"].includes(e.name)})),e=oe(e,D).initQueryParams),e.map((function(e,t){"select"===e.type&&e.value===F.a.select&&(e.value="")})),je(e),Se(Ge(e,null));var a=Object(j.a)(e);"infinite-scroll"===(null===D||void 0===D?void 0:D.type)&&(a=a.filter((function(e){return!["page","limit"].includes(e.name)})));var n=a.map((function(e,t){return"".concat(0===t?"?":"").concat(e.name,"=").concat(encodeURIComponent(e.value||""))})).join("&");m&&n&&v(n)}}function Ge(e,t,a){if(D){if(te(D)){var n,r,i,o,l,s,c,u,d,p,m,f;if(Ne&&!Z(Ne))throw new Error("unexpected pagination source "+Ne.source);var v=Ne||{source:"query",type:D.type,page:parseInt((null===(n=D.params)||void 0===n?void 0:null===(r=n.page)||void 0===r?void 0:r.value)||"1"),limit:parseInt((null===(i=D.params)||void 0===i?void 0:null===(o=i.limit)||void 0===o?void 0:o.value)||"10"),descending:"true"===(null===(l=D.params)||void 0===l?void 0:null===(s=l.descending)||void 0===s?void 0:s.value)||!1,hasPreviousPage:!1,hasNextPage:!1,sortBy:null===(c=D.params)||void 0===c?void 0:null===(u=c.sortBy)||void 0===u?void 0:u.value};return v.total=a||(null===Ne||void 0===Ne?void 0:Ne.total),v.page=parseInt(null===(d=e.find((function(e){var t,a;return e.name===(null===D||void 0===D?void 0:null===(t=D.params)||void 0===t?void 0:null===(a=t.page)||void 0===a?void 0:a.name)})))||void 0===d?void 0:d.value)||v.page,v.limit=parseInt(null===(p=e.find((function(e){var t,a;return e.name===(null===D||void 0===D?void 0:null===(t=D.params)||void 0===t?void 0:null===(a=t.limit)||void 0===a?void 0:a.name)})))||void 0===p?void 0:p.value)||v.limit,v.descending="true"===(null===(m=e.find((function(e){var t,a;return e.name===(null===D||void 0===D?void 0:null===(t=D.params)||void 0===t?void 0:null===(a=t.descending)||void 0===a?void 0:a.name)})))||void 0===m?void 0:m.value)||v.descending,v.sortBy=(null===(f=e.find((function(e){var t,a;return e.name===(null===D||void 0===D?void 0:null===(t=D.params)||void 0===t?void 0:null===(a=t.sortBy)||void 0===a?void 0:a.name)})))||void 0===f?void 0:f.value)||v.sortBy,v.hasPreviousPage=I.hasPreviousPage(v.page),v.hasNextPage=I.hasNextPage(v.page,v.limit,v.total),v}if(ae(D)){var h,g,y;if(Ne&&!ee(Ne))throw new Error("unexpected pagination source "+Ne.source);var b=Ne||{source:"body",type:D.type,next:t[D.params.nextPath||F.a.next],previous:t[D.params.prevPath||F.a.previous],hasNextPage:!!t[D.params.nextPath||F.a.next],hasPreviousPage:!!t[D.params.prevPath||F.a.previous],limit:parseInt((null===(h=D.params)||void 0===h?void 0:null===(g=h.limit)||void 0===g?void 0:g.value)||"10"),total:t[D.params.countPath||"count"]};return t&&(b.next=t[D.params.nextPath||F.a.next],b.previous=t[D.params.prevPath||F.a.previous],b.hasNextPage=!!t[D.params.nextPath||F.a.next],b.hasPreviousPage=!!t[D.params.prevPath||F.a.previous],b.total=t[D.params.countPath||"count"]),b.limit=parseInt(null===(y=e.find((function(e){var t,a;return e.name===(null===D||void 0===D?void 0:null===(t=D.params)||void 0===t?void 0:null===(a=t.limit)||void 0===a?void 0:a.name)})))||void 0===y?void 0:y.value)||b.limit,b}throw new Error("unrecognized pagination source")}}return Object(n.useEffect)((function(){var e,t,a=(null===u||void 0===u?void 0:null===(e=u.config)||void 0===e?void 0:null===(t=e.pages)||void 0===t?void 0:t.filter((function(e,t){return e.id===m||t+1===parseInt(m||"")}))[0])||null;u.setActivePage(a)}),[m]),Object(n.useEffect)((function(){var e=oe((null===A||void 0===A?void 0:A.queryParams)||[],D),t=e.initQueryParams,a=e.initialPagination;Ie([]),je(function(e){if(!D||te(D)){var t=k.parse(h.search),a=e.map((function(e){return"undefined"!==typeof t[e.name]?e.value="boolean"===e.type?"true"===t[e.name]:decodeURIComponent(t[e.name]):e.value=e.value||"",e}));return Se(Ge(a,null)),a}return e}(t)),Se(a)}),[g]),Object(n.useEffect)((function(){Me()}),[Pe]),r.a.createElement("div",{className:"app-page"},r.a.createElement("header",{className:"app-page-header"},r.a.createElement("hgroup",null,r.a.createElement("h2",null,null===g||void 0===g?void 0:g.name),(null===g||void 0===g?void 0:g.description)&&r.a.createElement("h4",null,null===g||void 0===g?void 0:g.description)),M&&r.a.createElement(U,{className:"add-item",color:"green",onClick:function(){return function(e){var t;return s.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:Ee(t={title:ne,config:e}),console.log(t),console.log(be);case 4:case"end":return a.stop()}}))}(M)}},Q),L&&r.a.createElement(U,{className:"add-item",color:"green",onClick:function(){return he({type:"add",title:Y,config:L,submitCallback:He})}},W)),r.a.createElement("main",{className:"app-page-content"},function(){var e,t=((null===A||void 0===A?void 0:A.fields)||(null===A||void 0===A?void 0:null===(e=A.display)||void 0===e?void 0:e.fields)||[]).filter((function(e){return e.filterable})).map((function(e){return e.name}));return r.a.createElement(r.a.Fragment,null,r.a.createElement(J,{initialParams:Pe,paginationConfig:D,submitCallback:Je}),t.length>0&&r.a.createElement(X,{onChange:_e}),(null===Ne||void 0===Ne?void 0:Ne.total)&&function(){if(!de&&qe.length){if(!Ne||Z(Ne)){var e,t,a=(((null===Ne||void 0===Ne?void 0:Ne.page)||1)-1)*((null===Ne||void 0===Ne?void 0:Ne.limit)||10)+1,n=a+qe.length-1,i="".concat(F.a.showing_result," ").concat(a,"-").concat(n," ").concat(F.a.out_of," ").concat(null===Ne||void 0===Ne?void 0:Ne.total," ").concat(F.a.items);if("infinite-scroll"===(null===Ne||void 0===Ne?void 0:Ne.type)&&(i="Showing ".concat(null===Ne||void 0===Ne?void 0:Ne.total," items")),null===G||void 0===G?void 0:null===(e=G.pagination)||void 0===e?void 0:e.itemsCount)i=null===G||void 0===G?void 0:null===(t=G.pagination)||void 0===t?void 0:t.itemsCount.replace(":currentCountFrom",a).replace(":currentCountTo",a).replace(":totalCount",null===Ne||void 0===Ne?void 0:Ne.total);return r.a.createElement("p",{className:"center pagination-state"},i)}if(ee(Ne)){var o,l,s="Total Results: ".concat(null===Ne||void 0===Ne?void 0:Ne.total);if("infinite-scroll"===(null===Ne||void 0===Ne?void 0:Ne.type)&&(s="Showing ".concat(null===Ne||void 0===Ne?void 0:Ne.total," items")),null===G||void 0===G?void 0:null===(o=G.pagination)||void 0===o?void 0:o.itemsCount)s=null===G||void 0===G?void 0:null===(l=G.pagination)||void 0===l?void 0:l.itemsCount.replace(":totalCount",null===Ne||void 0===Ne?void 0:Ne.total);return r.a.createElement("p",{className:"center pagination-state"},s)}}}(),b?r.a.createElement("div",{className:"app-error"},b):function(){var e;if(de)return r.a.createElement(q,null);var t=(null===A||void 0===A?void 0:A.fields)||(null===A||void 0===A?void 0:null===(e=A.display)||void 0===e?void 0:e.fields)||[],a=t.filter((function(e){return e.filterable})).map((function(e){return e.name})),n=qe;if(De&&a.length&&(n=qe.filter((function(e){var t=!1;return a.forEach((function(a){var n=e[a];"string"===typeof n&&n.toLowerCase().indexOf(De)>=0&&(t=!0)})),t}))),!n.length)return r.a.createElement("div",{className:"app-error"},F.a.nothing_to_see);var i=D?function(){if(te(D)){if(Ne&&!Z(Ne))throw new Error("unexpected pagination source "+Ne.source);if((null===Ne||void 0===Ne?void 0:Ne.page)&&Pe.length>0){var e=(null===Ne||void 0===Ne?void 0:Ne.page)+1;Je(Pe.map((function(t){var a,n;return t.name===(null===(a=D.params)||void 0===a?void 0:null===(n=a.page)||void 0===n?void 0:n.name)?Object(O.a)({},t,{value:e}):t})))}}else{if(!ae(D))throw new Error("unrecognized pagination source");if(Ne&&!ee(Ne))throw new Error("unexpected pagination source "+Ne.source);if(!A||!(null===Ne||void 0===Ne?void 0:Ne.next))return;var t=A.requestHeaders,a=A.actualMethod,n=A.dataPath,r=A.sortBy,i=A.dataTransform;$e({actualMethod:a,url:Ne.next,requestHeaders:t,dataPath:n,dataTransform:i,sortBy:r})}}:null,o=D?function(){if(te(D)){if(Ne&&!Z(Ne))throw new Error("unexpected pagination source "+Ne.source);if((null===Ne||void 0===Ne?void 0:Ne.page)&&Ne.page>1&&Pe.length>0){var e=(null===Ne||void 0===Ne?void 0:Ne.page)-1;Je(Pe.map((function(t){var a,n;return t.name===(null===(a=D.params)||void 0===a?void 0:null===(n=a.page)||void 0===n?void 0:n.name)?Object(O.a)({},t,{value:e}):t})))}}else{if(!ae(D))throw new Error("unrecognized pagination source");if(Ne&&!ee(Ne))throw new Error("unexpected pagination source "+Ne.source);if(!A||!(null===Ne||void 0===Ne?void 0:Ne.previous))return;var t=A.requestHeaders,a=A.actualMethod,n=A.dataPath,r=A.sortBy,i=A.dataTransform;$e({actualMethod:a,url:Ne.previous,requestHeaders:t,dataPath:n,dataTransform:i,sortBy:r})}}:null,l={delete:z?ze:null,put:H?Re:null,action:T.length?Be:function(){},getNextPage:i,getPreviousPage:o};return"cards"===(null===A||void 0===A?void 0:A.display.type)?r.a.createElement($,{pagination:Ne,callbacks:l,fields:t,items:n,customActions:T,customLabels:G}):r.a.createElement(R,{pagination:Ne,callbacks:l,fields:t,items:n,customActions:T,customLabels:G})}())}()),ve&&r.a.createElement(K,{title:ve.title,closeCallback:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(he(null),!0===e)if("infinite-scroll"===(null===Ne||void 0===Ne?void 0:Ne.type)){Ie([]);var t=Object(j.a)(Pe);Object(S.remove)(t,(function(e){return["page","limit"].includes(e.name)})),je(oe(t,D).initQueryParams)}else Me()},submitCallback:ve.submitCallback,fields:(null===(o=ve.config)||void 0===o?void 0:o.fields)||[],rawData:ve.rawData,getSingleConfig:ve.getSingleConfig,methodConfig:ve.config}),be&&r.a.createElement(ie,{title:be.title,closeCallback:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(Ee(null),!0===e)if("infinite-scroll"===(null===Ne||void 0===Ne?void 0:Ne.type)){Ie([]);var t=Object(j.a)(Pe);Object(S.remove)(t,(function(e){return["page","limit"].includes(e.name)})),je(oe(t,D).initQueryParams)}else Me()},fields:(null===(l=be.config)||void 0===l?void 0:l.fields)||[],graphConfig:be.config}))})),se=(a(170),T((function(e){var t=e.context,a=Object(d.g)(),i=(a.location,a.replace,Object(n.useState)("")),o=Object(c.a)(i,2),l=o[0],u=o[1],m=Object(n.useState)(""),f=Object(c.a)(m,2),v=f[0],h=f[1],g=Object(n.useState)(""),y=Object(c.a)(g,2),b=y[0],E=y[1],w=t.setError,x=t.httpService;function P(e){var t,a;return s.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return e.preventDefault(),console.log("entrato nel submit form"),n.prev=2,t={username:"".concat(l),password:"".concat(v),tenant:"".concat(b)},n.next=6,s.a.awrap(x.fetch({method:"post",origUrl:x.loginUrl,body:JSON.stringify(t),headers:{"content-type":"application/json"}}));case 6:if(a=n.sent){n.next=9;break}throw new Error(F.a.login_error);case 9:sessionStorage.setItem("diten-token",a.token),console.log("token impostato"),window.location.replace("/"),n.next=18;break;case 14:n.prev=14,n.t0=n.catch(2),w(n.t0.message),p.b.error(n.t0.message);case 18:case"end":return n.stop()}}),null,null,[[2,14]])}return r.a.createElement("div",{className:"auth-page"},r.a.createElement("form",{className:"form-content",onSubmit:P},r.a.createElement("div",{className:"form-row row"},r.a.createElement("label",null,F.a.username),r.a.createElement("input",{type:"text",placeholder:F.a.username_suggestion,onChange:function(e){u(e.target.value)}})),r.a.createElement("div",{className:"form-row row"},r.a.createElement("label",null,F.a.password),r.a.createElement("input",{type:"password",placeholder:F.a.password_suggenstion,onChange:function(e){h(e.target.value)}})),r.a.createElement("div",{className:"form-row row"},r.a.createElement("label",null,F.a.tenant),r.a.createElement("input",{type:"text",placeholder:F.a.tenant_suggenstion,onChange:function(e){E(e.target.value)}})),r.a.createElement("div",{className:"buttons-wrapper center"},r.a.createElement(U,{type:"submit",onClick:P,color:"green"},F.a.submit))))}))),ce=(a(171),T((function(e){var t=e.context.config,a=Object(n.useState)(!1),i=Object(c.a)(a,2),o=i[0],l=i[1];return r.a.createElement("nav",{className:"app-nav"},r.a.createElement(U,{className:"app-nav-opener",onClick:function(){return l(!o)}},o?r.a.createElement("i",{className:"fa fa-times","aria-hidden":"true"}):r.a.createElement("i",{className:"fa fa-bars","aria-hidden":"true"})),r.a.createElement("div",{className:"app-nav-wrapper ".concat(o?"opened":"")},r.a.createElement("div",{className:"app-nav-links"},((null===t||void 0===t?void 0:t.pages)||[]).map((function(e,t){return r.a.createElement(u.b,{to:"/".concat(e.id||t+1),activeClassName:"active",key:"page_".concat(t),onClick:function(){return l(!1)}},e.name)})))))}))),ue=function(e){var t=e.styles.vars||{},a=[];for(var n in t)a.push("--".concat(n,": ").concat(t[n]));return r.a.createElement("style",{dangerouslySetInnerHTML:{__html:"\n      :root {\n        ".concat(a.join(";"),"\n      }\n    ")}})},de=(a(172),a(173),new b),pe="RESTool App";function me(e){var t=document.createElement("link"),a=document.getElementById("favicon");t.id="favicon",t.rel="shortcut icon",t.href=e,a&&document.head.removeChild(a),document.head.appendChild(t)}var fe=function(){var e,t,a,i=Object(n.useState)(!0),o=Object(c.a)(i,2),l=o[0],m=o[1],f=Object(n.useState)(null),v=Object(c.a)(f,2),h=v[0],g=v[1],y=Object(n.useState)((null===h||void 0===h?void 0:null===(e=h.pages)||void 0===e?void 0:e[0])||null),b=Object(c.a)(y,2),E=b[0],w=b[1],x=Object(n.useState)(null),j=Object(c.a)(x,2),O=j[0],k=j[1],N=(null===h||void 0===h?void 0:h.name)||pe;return Object(n.useEffect)((function(){!function e(t){var a,n,r,i,o;return s.a.async((function(l){for(;;)switch(l.prev=l.next){case 0:if(l.prev=0,i=null===(a=window.RESTool)||void 0===a?void 0:a.config,t||!i){l.next=6;break}o=Object.assign({},i,{}),l.next=16;break;case 6:if(!t){l.next=12;break}return l.next=9,s.a.awrap(P.getRemoteConfig(t));case 9:l.t0=l.sent,l.next=15;break;case 12:return l.next=14,s.a.awrap(P.loadDefaultConfig());case 14:l.t0=l.sent;case 15:o=l.t0;case 16:if(de.baseUrl=o.baseUrl||"",de.loginUrl=o.loginUrl||"",de.errorMessageDataPath=o.errorMessageDataPath||"",de.unauthorizedRedirectUrl=o.unauthorizedRedirectUrl||"",de.requestHeaders=o.requestHeaders||{},document.title=o.name||pe,(null===(n=o)||void 0===n?void 0:n.favicon)&&me(o.favicon),!(null===(r=o)||void 0===r?void 0:r.remoteUrl)){l.next=27;break}return l.next=26,s.a.awrap(e(o.remoteUrl));case 26:return l.abrupt("return",l.sent);case 27:g(o),l.next=33;break;case 30:l.prev=30,l.t1=l.catch(0),console.error("Could not load config file",l.t1);case 33:m(!1);case 34:case"end":return l.stop()}}),null,null,[[0,30]])}()}),[]),Object(n.useEffect)((function(){var e=P.validateConfig(h),t=e.isValid,a=e.errorMessage;if(!t)return k(a),void p.b.error(a)}),[h]),null===sessionStorage.getItem("diten-token")?r.a.createElement("div",{className:"restool-app"},r.a.createElement(C.Provider,{value:{config:h,activePage:E,setActivePage:w,error:O,setError:k,httpService:de}},r.a.createElement(u.a,null,r.a.createElement(d.b,{exact:!0,path:"/",component:se})))):r.a.createElement("div",{className:"restool-app"},h?r.a.createElement(C.Provider,{value:{config:h,activePage:E,setActivePage:w,error:O,setError:k,httpService:de}},h.customStyles&&r.a.createElement(ue,{styles:h.customStyles}),r.a.createElement(u.a,null,r.a.createElement("aside",null,r.a.createElement("h1",{title:N,onClick:function(){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:250,t=window.scrollY/2,a=0,n=performance.now();window.requestAnimationFrame((function r(i){(a+=Math.PI/(e/(i-n)))>=Math.PI&&window.scrollTo(0,0),0!==window.scrollY&&(window.scrollTo(0,Math.round(t+t*Math.cos(a))),n=i,window.requestAnimationFrame(r))}))}()}},N),r.a.createElement(ce,null)),h&&r.a.createElement(d.d,null,r.a.createElement(d.b,{exact:!0,path:"/login",component:se}),r.a.createElement(d.b,{exact:!0,path:"/:page",component:le}),r.a.createElement(d.a,{path:"/",to:"/".concat((null===h||void 0===h?void 0:null===(t=h.pages)||void 0===t?void 0:null===(a=t[0])||void 0===a?void 0:a.id)||"1")})),r.a.createElement(p.a,{position:p.b.POSITION.TOP_CENTER,autoClose:4e3,draggable:!1}))):r.a.createElement("div",{className:"app-error"},l?"Loading Configuration...":"Could not find config file."))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(174);o.a.render(r.a.createElement(fe,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},3:function(e,t){var a=Object.freeze({username:"Nome utente",password:"Password",tenant:"Organizzazione",username_suggestion:"Inserisci il nome utente",password_suggenstion:"Inserisci la password",tenant_suggenstion:"Inserisci la tua organizzazione",submit:"Invio",login_error:"Login errata!",search:"Cerca",previous_page:"Pagina precedente",next_page:"Prossima pagina",showing_result:"Risultati",out_of:"di",items:"totali",nothing_to_see:"Nessun risultato",enter_text:"Inserisci testo",next:"Successivo",previous:"Precedente",select:"",add:"Aggiungi",update:"Aggiorna",session_expired:"Sessione scaduta",graph:"Grafico"});e.exports=a},61:function(e,t,a){},79:function(e,t,a){e.exports=a(175)}},[[79,1,2]]]);
//# sourceMappingURL=main.f9a910c2.chunk.js.map