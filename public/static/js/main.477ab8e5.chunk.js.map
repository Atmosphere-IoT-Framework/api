{"version":3,"sources":["helpers/data.helpers.ts","services/http.service.ts","services/config.service.ts","components/app.context.ts","components/withContext/withContext.comp.tsx","components/loader/loader.comp.tsx","helpers/pagination.helpers.ts","components/button/button.comp.tsx","components/infiniteLoader/infiniteLoader.comp.tsx","components/pagination/pagination.comp.tsx","components/table/table.comp.tsx","components/cards/cards.comp.tsx","components/formRow/formRow.comp.tsx","components/queryParams/queryParams.comp.tsx","components/popup/popup.comp.tsx","helpers/file.helpers.ts","components/formPopup/formPopup.comp.tsx","components/filterField/filterField.comp.tsx","common/models/states.types.helper.ts","common/models/config.types.helper.ts","components/page/page.comp.tsx","components/authPage/authPage.comp.tsx","components/navigation/navigation.comp.tsx","components/customStyles/customStyles.comp.tsx","components/app.tsx","serviceWorker.ts","index.tsx","common/locale.js"],"names":["dataHelpers","data","dataPath","attr","extractedData","digProps","split","prop","field","type","arrayType","HttpService","baseUrl","unauthorizedRedirectUrl","errorMessageDataPath","loginUrl","requestHeaders","this","url","indexOf","rawData","outputUrl","Object","keys","forEach","key","urlParamName","replace","queryParams","length","replaceParamsInUrl","params","page","limit","param","value","name","push","join","console","log","reqUrl","urlIsAbsolute","origUrl","finalUrl","buildUrl","authorization","sessionStorage","getItem","Authorization","method","toUpperCase","headers","assign","body","undefined","res","errorMessage","json","path","dataAtPath","extractDataByDataPath","status","statusText","redirectUrl","encodeURIComponent","document","location","href","Error","getErrorMessage","responseType","fetch","ok","text","handleError","buildRequest","makeRequest","httpService","HTTPService","endsWith","import","default","getRemoteConfig","config","isValid","configSchema","require","validate","Ajv","allErrors","verbose","compile","firstError","errors","message","error","AppContext","React","createContext","activePage","setError","setActivePage","withAppContext","Component","props","Consumer","context","Loader","className","paginationHelpers","parseInt","_page","_itemsPerPage","_total","Button","color","children","InfiniteLoader","Pagination","callbacks","pagination","previousTitle","customLabels","locale","previous_page","nextTitle","next_page","disabled","hasPreviousPage","onClick","previousPage","title","aria-hidden","hasNextPage","nextPage","Table","items","fields","customActions","editLabel","buttons","editItem","deleteLabel","deleteItem","actionColumnHeader","tableColumnHeaders","actions","paginationCallbacks","getNextPage","getPreviousPage","renderTableRow","item","rowIdx","map","fieldIdx","truncate","origField","origItem","src","alt","label","fieldValue","target","rel","urlLabel","style","backgroundColor","html","htmlCode","dangerouslySetInnerHTML","__html","renderTableCell","put","call","action","idx","icon","delete","renderTableContent","useEffect","clientHeight","window","innerHeight","dataLength","next","hasMore","loader","Cards","renderActions","cardIdx","renderCard","onError","e","currentTarget","Fragment","renderRow","renderCardSkeleton","duration","startingIndex","Array","from","renderSkeletons","FormRow","direction","showReset","onChange","useState","optionSources","setOptionSources","pageHeaders","addArrayItemLabel","addArrayItem","clearLabel","clearInput","renderArrayItems","originalField","array","itemIdx","inputField","renderFieldInput","fieldName","updatedArray","localValue","splice","removeItemToFieldArray","aria-label","preventDefault","addItemToFieldArray","changeCallback","inputProps","defaultPlaceholder","placeholder","readonly","required","checked","optionSource","a","async","actualMethod","result","optionSourceData","option","valuePath","displayPath","display","toast","loadOptionSourceFromRemote","sortBy","finalOptions","options","sortedOptions","orderBy","select","placeholders","object","enter_text","number","valueAsNumber","email","password","accept","file","date","originalName","QueryParams","initialParams","paginationConfig","submitCallback","setQueryParams","submit","formChanged","submitAfterChange","updatedQueryParams","filteredParams","filter","includes","search","onSubmit","queryParam","hidden","portalRoot","getElementById","createElement","setAttribute","append","PortalPopup","el","componentDidMount","appendChild","componentWillUnmount","removeChild","ReactDOM","createPortal","Popup","_handleKeyDown","show","closeCallback","keyCode","closeLabel","closeForm","ref","refCallback","addEventListener","bind","removeEventListener","fileHelpers","fieldIndex","unflatten","FormPopup","getSingleConfig","methodConfig","fieldsCopy","JSON","parse","stringify","loading","setLoading","formFields","setFormFields","finalRawData","setFinalRawData","submitForm","finalObject","includeOriginalFields","formData","FormData","containFiles","isMultipartForm","validationError","useInUrl","checkIfFieldIsObject","fileInput","querySelector","files","firstFile","success","updatedFormFields","dataPathSplit","lookupValue","objToLookIn","pathElem","lookup","initFormFields","FilterField","toLowerCase","isQueryPaginationState","obj","source","isBodyPaginationState","isQueryPagination","isBodyPagination","buildInitQueryParamsAndPaginationState","initQueryParams","initialPagination","descending","find","previous","Page","useParams","useHistory","pageMethods","methods","getAllConfig","getAll","infiniteScroll","getSingle","postConfig","post","putConfig","deleteConfig","addItemLabel","addItem","add","itemName","addItemFormTitle","formTitles","editItemFormTitle","update","openedPopup","setOpenedPopup","setPagination","setItems","setFilter","openEditPopup","updateItem","openCustomActionPopup","performAction","fetchPageData","isArray","dataTransform","orderedItems","total","newPaginationState","getUpdatedPaginationState","getAllRequest","confirm","updatedParams","remove","submitQueryParams","reset","paramsToUrl","queryState","newState","nextPath","prevPath","countPath","nextActivePage","pages","p","pIdx","id","parsedParams","QueryString","finalQueryParams","decodeURIComponent","extractQueryParams","description","fieldsToFilter","filterable","currentCountFrom","currentCountTo","showing_result","out_of","itemsCount","renderPaginationStateLabel","filteredItems","passFilter","nothing_to_see","newPage","renderItemsUI","renderPageContent","refreshData","AuthPage","user","setUser","pwd","setPwd","tenant","setTenant","credentials","username","login_error","setItem","token","state","pathname","username_suggestion","event","password_suggenstion","tenant_suggenstion","Navigation","isOpened","setIsOpened","to","activeClassName","CustomStyles","cssVars","styles","vars","arr","defaultAppName","changeFavicon","link","oldLink","head","App","firstLoad","setFirstLoad","setConfig","appName","loadConfig","windowConfig","RESTool","remoteConfig","ConfigService","loadDefaultConfig","favicon","remoteUrl","validateConfig","Provider","customStyles","scrollDuration","cosParameter","scrollY","scrollCount","oldTimestamp","performance","now","requestAnimationFrame","step","newTimestamp","Math","PI","scrollTo","round","cos","scrollToTop","exact","component","position","POSITION","TOP_CENTER","autoClose","draggable","Boolean","hostname","match","render","navigator","serviceWorker","ready","then","registration","unregister","freeze","no","module","exports"],"mappings":"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","file":"static/js/main.477ab8e5.chunk.js","sourcesContent":["import { IConfigInputField } from \"../common/models/config.model\";\r\n\r\nclass DataHelpers {\r\n\r\n  public extractDataByDataPath(data: any, dataPath: string, attr: string | null = null) {\r\n    if (!data || !dataPath) {\r\n      if (attr) {\r\n        return data[attr];\r\n      }\r\n      return data;\r\n    }\r\n\t\r\n    let extractedData: any = data;\r\n    const digProps: string[] = dataPath.split('.');\r\n\r\n    for (let prop of digProps) {\r\n      if (typeof extractedData[prop] !== 'undefined') {\r\n        extractedData = extractedData[prop];\r\n      } else {\r\n        return null;\r\n      }\r\n    }\r\n\r\n    if (typeof extractedData === 'undefined') {\r\n      return null;\r\n    }\r\n\r\n    if (attr) {\r\n      return extractedData[attr];\r\n    }\r\n\r\n    return extractedData;\r\n  }\r\n\r\n  public checkIfFieldIsObject(field: IConfigInputField): boolean {\r\n    if (field.type === 'object') {\r\n      return true;\r\n    }\r\n\r\n    if (field.type === 'array') {\r\n      if (!field.arrayType || field.arrayType === 'object') {\r\n        return true;\r\n      }\r\n    }\r\n\r\n    return false;\r\n  }\r\n\r\n}\r\n\r\nexport const dataHelpers = new DataHelpers();","import locale from '../common/locale';\r\nimport { TConfigMethod, IQueryParam } from '../common/models/config.model';\r\nimport { dataHelpers } from '../helpers/data.helpers';\r\n\r\nexport type ResponseType = 'json' | 'text' | 'boolean' | 'status';\r\n\r\nexport interface IFetchParams {\r\n  origUrl: string\r\n  method?: TConfigMethod\r\n  headers?: any\r\n  queryParams?: IQueryParam[]\r\n  rawData?: any\r\n  body?: any\r\n  responseType?: ResponseType\r\n}\r\n\r\nclass HttpService {\r\n  public baseUrl: string;\r\n  public loginUrl: string;\r\n  public unauthorizedRedirectUrl: string;\r\n  public errorMessageDataPath: string | string[];\r\n  public requestHeaders: any;\r\n\r\n  constructor(baseUrl: string = '', unauthorizedRedirectUrl: string = '', errorMessageDataPath: string = '', loginUrl: string = '') {\r\n    this.baseUrl = baseUrl || '';\r\n    this.loginUrl = loginUrl || '';\r\n    this.unauthorizedRedirectUrl = unauthorizedRedirectUrl || '';\r\n    this.errorMessageDataPath = errorMessageDataPath || '';\r\n    this.requestHeaders = {};\r\n  }\r\n\r\n  private urlIsAbsolute(url: string) {\r\n    if (url.indexOf('http') === 0 || url.indexOf('https') === 0) {\r\n      return true;\r\n    }\r\n    return false;\r\n  }\r\n\r\n  private replaceParamsInUrl(url: string, rawData?: any): string {\r\n    if (!rawData || typeof rawData !== 'object') {\r\n      return url;\r\n    }\r\n\r\n    let outputUrl = url;\r\n\r\n    Object.keys(rawData).forEach((key) => {\r\n      const urlParamName = `:${key}`;\r\n      outputUrl = outputUrl.replace(urlParamName, rawData[key] as string);\r\n    });\r\n\r\n    return outputUrl;\r\n  }\r\n\r\n  private buildUrl(url: string, queryParams: IQueryParam[] = [], rawData?: any): string {\r\n    if (!queryParams || !queryParams.length) {\r\n      return this.replaceParamsInUrl(url, rawData);\r\n    }\r\n\r\n    let outputUrl = url;\r\n    const params = [];\r\n    let page = '-1'\r\n    let limit = '10'\r\n\r\n    for (let param of queryParams) {\r\n      let value = '';\r\n      if (!param.name || typeof param.value === 'undefined') { continue; } \r\n      if (param.name === 'page') { page = param.value; continue; }\r\n      if (param.name === 'limit') { limit = param.value; continue; }\r\n      if (param.name === 'tags' && param.value === \"\") { continue; }\r\n      if (param.name === 'info') value = '{\"$regex\":\"' + param.value + '\",\"$options\":\"i\"}';\r\n      else value = '\"' + param.value + '\"';\r\n      //test regex\r\n      params.push(`\"${param.name}\":{\"$regex\" : ${value || ''}}`);\r\n      //params.push(`\"${param.name}\":${value || ''}`);\r\n\r\n    }\r\n\r\n    outputUrl += '?filter={' + params.join(',') + '}';\r\n    if(page != '-1') outputUrl += \"&page=\" + page;\r\n    outputUrl += \"&limit=\" + limit;\r\n\r\n    console.log(\"Requested URL : \"+outputUrl);\r\n\r\n    return outputUrl;\r\n  }\r\n\r\n  private buildRequest(params: IFetchParams): { url: string, params: any } {\r\n    const reqUrl: string = this.urlIsAbsolute(params.origUrl) ? params.origUrl : this.baseUrl + params.origUrl;\r\n    const finalUrl: string = this.buildUrl(reqUrl, params.queryParams, params.rawData);\r\n    const authorization = sessionStorage.getItem('diten-token') ? { Authorization: sessionStorage.getItem('diten-token'), } : {};\r\n    const requestParams = {\r\n      method: params.method ? params.method.toUpperCase() : 'GET',\r\n      headers: Object.assign(authorization, this.requestHeaders, params.headers || {}),\r\n      body: params.method === 'post' || params.method === 'put' || params.method === 'patch' ? params.body : undefined\r\n    };\r\n\r\n    return {\r\n      url: finalUrl,\r\n      params: requestParams\r\n    };\r\n  }\r\n\r\n  private async getErrorMessage(res: Response | any): Promise<string> {\r\n    let errorMessage: string = '';\r\n\r\n    try {\r\n      const body = await res.json();\r\n\r\n      for (const path of this.errorMessageDataPath) {\r\n        const dataAtPath = dataHelpers.extractDataByDataPath(body, path);\r\n\r\n        if (dataAtPath) {\r\n          errorMessage = dataAtPath;\r\n        }\r\n      }\r\n    } catch { } // TODO: proper handling of errors (^.^)\r\n\r\n    return errorMessage && errorMessage.length ?\r\n      errorMessage :\r\n      `${res.status} - ${res.statusText || ''}`;\r\n  }\r\n\r\n  private async handleError(res: Response) {\r\n    // In case response status is \"Unauthorized\", redirect to relevant url\r\n    if (res.status === 401 && this.unauthorizedRedirectUrl) {\r\n      const redirectUrl: string = this.unauthorizedRedirectUrl.replace(':returnUrl', encodeURIComponent(document.location.href));\r\n      document.location.href = redirectUrl;\r\n      return;\r\n    }\r\n\r\n    throw new Error(await this.getErrorMessage(res));\r\n  }\r\n\r\n  private async makeRequest(url: string, params: any = {}, responseType: ResponseType = 'json') {\r\n    const res: Response = await fetch(url, Object.assign({}, params, {}));\r\n\r\n    if (res.ok) {\r\n      switch (responseType) {\r\n        case 'json':\r\n          return await res.json();\r\n        case 'text':\r\n          return await res.text();\r\n        case 'boolean':\r\n          return true;\r\n        default:\r\n          return true;\r\n      }\r\n    }\r\n\r\n    await this.handleError(res);\r\n  }\r\n\r\n  public async fetch({ method, origUrl, queryParams, rawData, body, headers, responseType }: IFetchParams) {\r\n    const { url, params } = this.buildRequest({ method, origUrl, queryParams, rawData, body, headers });\r\n    return await this.makeRequest(url, params, responseType);\r\n  }\r\n}\r\n\r\nexport default HttpService;\r\n","import HTTPService from './http.service';\r\nimport { IConfig } from '../common/models/config.model';\r\nimport Ajv from 'ajv';\r\n\r\nconst httpService: HTTPService = new HTTPService();\r\n\r\nclass ConfigService extends HTTPService {\r\n\r\n  public async getRemoteConfig(url: string) {\r\n    if (url.endsWith('.js')) {\r\n      return (await import(/* webpackIgnore: true */url)).default;\r\n    }\r\n    return await httpService.fetch({\r\n      origUrl: url,\r\n    });\r\n  }\r\n\r\n  public async loadDefaultConfig() { return (await this.getRemoteConfig('../../config.js')); }\r\n\r\n  public validateConfig(config: IConfig | null): { isValid: boolean, errorMessage: string | null } {\r\n    if (config === null) {\r\n      return {\r\n        isValid: true,\r\n        errorMessage: null,\r\n      }\r\n    }\r\n    const configSchema = require('../assets/schemas/config.schema.json');\r\n    const ajv = new Ajv({\r\n      allErrors: true,\r\n      verbose: true,\r\n    });\r\n    const validate = ajv.compile(configSchema);\r\n    const isValid = validate(config);\r\n    if (typeof isValid !== 'boolean') {\r\n      throw new Error('Unexpected asynchronous JSON validation');\r\n    }\r\n    if (isValid) {\r\n      return {\r\n        isValid,\r\n        errorMessage: null,\r\n      }\r\n    }\r\n    const firstError = validate.errors ? validate.errors[0] : undefined;\r\n    let errorMessage: string | null = null;\r\n    if (firstError?.message && firstError?.dataPath) {\r\n      errorMessage = `Error parsing configuration at \"${firstError.dataPath}\": ${firstError.message}`\r\n    } else if (firstError?.message) {\r\n      errorMessage = `Error parsing configuration: ${firstError.message}`\r\n    } else if (firstError?.dataPath) {\r\n      errorMessage = `Error parsing configuration at \"${firstError.dataPath}\"`\r\n    } else {\r\n      errorMessage = `Error parsing configuration`;\r\n    }\r\n    console.error(errorMessage);\r\n    console.error('All configuration errors: ', validate.errors);\r\n    return {\r\n      isValid,\r\n      errorMessage,\r\n    };\r\n  }\r\n\r\n}\r\n\r\nexport default new ConfigService();\r\n","import React from 'react';\r\nimport { IConfig, IConfigPage } from '../common/models/config.model';\r\nimport HttpService from '../services/http.service';\r\n\r\nexport interface IAppContext {\r\n  config: IConfig | null\r\n  activePage: IConfigPage | null\r\n  error: string | null\r\n  setError: (error: string | null) => void\r\n  setActivePage: (activePage: IConfigPage | null) => void\r\n  httpService: HttpService\r\n}\r\n\r\nexport const AppContext = React.createContext<IAppContext>({\r\n  config: null,\r\n  activePage: null,\r\n  error: null,\r\n  setError: () => {},\r\n  setActivePage: () => {},\r\n  httpService: new HttpService()\r\n});","import React from 'react';\r\nimport { AppContext } from '../app.context';\r\n\r\nexport const withAppContext = (Component: any) => {\r\n  return (props: any) => (\r\n    <AppContext.Consumer>    \r\n      {(context) => {\r\n        return <Component {...props} context={context} />\r\n      }}\r\n    </AppContext.Consumer>\r\n  );\r\n};","import React from 'react';\r\n\r\nimport './loader.scss';\r\n\r\nexport const Loader = () => {\r\n  return (\r\n    <div className=\"app-loader cp-spinner cp-balls small\"></div>\r\n  );\r\n};","class PaginationHelpers {\r\n  public hasPreviousPage(page: string | number | undefined): boolean {\r\n    if (page === undefined) {\r\n      return false;\r\n    }\r\n\r\n    if (typeof page === 'string') {\r\n      return parseInt(page) > 1;\r\n    }\r\n\r\n    return page > 1;\r\n  }\r\n\r\n  public hasNextPage(_page: string | number, _itemsPerPage: string | number, _total: string | number | undefined): boolean {\r\n    if (_total === undefined) {\r\n      return true;\r\n    }\r\n    const page = typeof _page === 'string' ? parseInt(_page) : _page;\r\n    const itemsPerPage = typeof _itemsPerPage === 'string' ? parseInt(_itemsPerPage) : _itemsPerPage;\r\n    const total = typeof _total === 'string' ? parseInt(_total) : _total;\r\n\r\n    return page * itemsPerPage < total;\r\n  }\r\n}\r\n\r\nexport const paginationHelpers = new PaginationHelpers();","import React from 'react';\r\n\r\nimport './button.scss';\r\n\r\ninterface IProps {\r\n  children: any\r\n  type?: 'submit' | 'button' | 'reset'\r\n  title?: string\r\n  className?: string\r\n  onClick?: (e: any) => void\r\n  color?: 'gray' | 'blue' | 'green' | 'red'\r\n  disabled?: boolean\r\n}\r\n\r\nexport const Button = (props: IProps) => {\r\n  return (\r\n    <button {...props} className={`button ${props.className || ''} ${props.color || ''}`}>{props.children}</button>\r\n  );\r\n};","import React from 'react';\r\n\r\nimport './infiniteLoader.scss';\r\n\r\nexport const InfiniteLoader = () => {\r\n  return (\r\n    <div className=\"app-infinite-loader cp-spinner cp-balls small\"></div>\r\n  );\r\n};","import React from 'react';\r\nimport { ICustomLabels } from '../../common/models/config.model';\r\nimport { IPaginationState } from '../../common/models/states.model';\r\nimport { Button } from '../button/button.comp';\r\nimport locale from '../../common/locale.js';\r\n\r\nimport './pagination.scss';\r\n\r\ninterface IProps {\r\n  pagination: IPaginationState\r\n  callbacks: {\r\n    previousPage: () => void,\r\n    nextPage: () => void,\r\n  }\r\n  customLabels?: ICustomLabels\r\n}\r\n\r\nexport const Pagination = ({ callbacks, pagination, customLabels }: IProps) => {\r\n  const previousTitle = locale.previous_page;\r\n  const nextTitle = locale.next_page;\r\n  return (\r\n    <div className=\"pagination-wrapper\">\r\n      <Button disabled={!pagination.hasPreviousPage} onClick={() => callbacks.previousPage()} title={previousTitle}>\r\n        <i className=\"fa fa-arrow-left\" aria-hidden=\"true\"></i>\r\n      </Button>\r\n      <Button disabled={!pagination.hasNextPage} onClick={() => callbacks.nextPage()} title={nextTitle}>\r\n        <i className=\"fa fa-arrow-right\" aria-hidden=\"true\" ></i>\r\n      </Button>\r\n    </div>\r\n  );\r\n};","import React, { useEffect } from 'react';\r\nimport InfiniteScroll from 'react-infinite-scroll-component';\r\n\r\nimport { IConfigDisplayField, IConfigCustomAction, ICustomLabels } from '../../common/models/config.model';\r\nimport { dataHelpers } from '../../helpers/data.helpers';\r\nimport { Button } from '../button/button.comp';\r\nimport { InfiniteLoader } from '../infiniteLoader/infiniteLoader.comp';\r\nimport { IPaginationState } from '../../common/models/states.model';\r\nimport { Pagination } from '../pagination/pagination.comp';\r\n\r\nimport './table.scss';\r\n\r\ninterface IProps {\r\n  items: any[]\r\n  pagination?: IPaginationState\r\n  callbacks: {\r\n    delete: ((item: any) => void) | null\r\n    put: ((item: any) => void) | null\r\n    action: (item: any, action: IConfigCustomAction) => void\r\n    getPreviousPage: (() => void) | null\r\n    getNextPage: (() => void) | null\r\n  }\r\n  fields: IConfigDisplayField[]\r\n  customActions?: IConfigCustomAction[]\r\n  customLabels?: ICustomLabels\r\n}\r\n\r\nexport const Table = ({ items, fields, pagination, callbacks, customActions, customLabels }: IProps) => {\r\n  const editLabel = customLabels?.buttons?.editItem || 'Edit';\r\n  const deleteLabel = customLabels?.buttons?.deleteItem || 'Delete';\r\n  const actionColumnHeader = customLabels?.tableColumnHeaders?.actions || 'Actions';\r\n  const paginationCallbacks = {\r\n    nextPage: callbacks.getNextPage || (() => { return; }),\r\n    previousPage: callbacks.getPreviousPage || (() => { return; }),\r\n  };\r\n\r\n  function renderTableCell(origField: IConfigDisplayField, origItem: any, value: any) {\r\n    if (origField.type === 'boolean') {\r\n      value = value ? true : false;\r\n    }\r\n\r\n    if (value && typeof value === 'object') {\r\n      return 'object';\r\n    }\r\n\r\n    switch (origField.type) {\r\n      case 'text':\r\n        return <span>{value}</span>;\r\n      case 'boolean':\r\n        return <div className={`bool ${value ? 'true' : 'false'}`}></div>;\r\n      case 'image':\r\n        return <img src={value || ''} alt={value || origField.label || origField.name} />;\r\n      case 'url':\r\n        let url: string = origField.url || value || '';\r\n\r\n        // Replace all url vars\r\n        fields.forEach((field) => {\r\n          const fieldValue = dataHelpers.extractDataByDataPath(origItem, field.dataPath, field.name);\r\n          url = url.replace(`:${field.name}`, fieldValue);\r\n        });\r\n\r\n        return <a href={url} target=\"_blank\" rel=\"noopener noreferrer\">{origField.urlLabel || value}</a>;\r\n      case 'colorbox':\r\n        return <div className=\"colorbox\" style={{ backgroundColor: value }}></div>;\r\n      case 'html':\r\n        const htmlCode = origField.htmlCode || '<span>{value}</span>';\r\n        const html =  htmlCode.replace('{value}', value);\r\n        return <div dangerouslySetInnerHTML={{__html: html}}></div>\r\n      default:\r\n        return value;\r\n    }\r\n  }\r\n\r\n  function renderTableRow(item: any, rowIdx: number) {\r\n    return (\r\n      <tr key={`tr_${rowIdx}`}>\r\n        {\r\n          fields.map((field, fieldIdx) => {\r\n            const value = dataHelpers.extractDataByDataPath(item, field.dataPath, field.name);\r\n            return (\r\n              <td className={field.truncate ? 'truncate' : ''} key={`td_${rowIdx}_${fieldIdx}`}>\r\n                {renderTableCell(field, item, value)}\r\n              </td>\r\n            );\r\n          })\r\n        }\r\n        <td>\r\n          <div className=\"actions-wrapper\">\r\n            {\r\n              callbacks.put &&\r\n              <Button onClick={() => callbacks.put?.(item)} title={editLabel}>\r\n                <i className=\"fa fa-pencil-square-o\" aria-hidden=\"true\"></i>\r\n              </Button>\r\n            }\r\n            {\r\n              (customActions && customActions.length > 0) &&\r\n              customActions.map((action, idx) => (\r\n                <Button key={`action_${rowIdx}_${idx}`} onClick={() => callbacks.action(item, action)} title={action.name}>\r\n                  <i className={`fa fa-${action.icon || 'cogs'}`} aria-hidden=\"true\"></i>\r\n                </Button>\r\n              ))\r\n            }\r\n            {\r\n              callbacks.delete &&\r\n              <Button onClick={() => callbacks.delete?.(item)} title={deleteLabel}>\r\n                <i className=\"fa fa-times\" aria-hidden=\"true\"></i>\r\n              </Button>\r\n            }\r\n          </div>\r\n        </td>\r\n      </tr>\r\n    );\r\n  }\r\n\r\n  function renderTableContent() {\r\n    return (\r\n      <table className=\"pure-table\">\r\n        <thead>\r\n          <tr>\r\n            {\r\n              fields.map((field) => {\r\n                return <th key={`th_${field.name}`}>{field.label || field.name}</th>;\r\n              })\r\n            }\r\n            <th>{actionColumnHeader}</th>\r\n          </tr>\r\n        </thead>\r\n        <tbody>\r\n          {\r\n            items.map(renderTableRow)\r\n          }\r\n        </tbody>\r\n      </table>\r\n    );\r\n  }\r\n\r\n  useEffect(() => {\r\n    if (\r\n      pagination?.type === 'infinite-scroll'\r\n      && document.body.clientHeight <= window.innerHeight\r\n      && pagination?.hasNextPage\r\n    ) {\r\n      paginationCallbacks.nextPage();\r\n    }\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, []);\r\n\r\n  if (pagination?.type === 'infinite-scroll') {\r\n    return (\r\n      <InfiniteScroll\r\n        dataLength={items.length}\r\n        next={callbacks.getNextPage || (() => null)}\r\n        hasMore={pagination?.hasNextPage || false}\r\n        loader={<InfiniteLoader />}\r\n      >\r\n        {renderTableContent()}\r\n      </InfiniteScroll>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"table-wrapper\">\r\n      {renderTableContent()}\r\n      {\r\n        pagination &&\r\n        pagination.type === 'buttons' &&\r\n        <Pagination\r\n          callbacks={paginationCallbacks}\r\n          pagination={pagination}\r\n          customLabels={customLabels}\r\n        ></Pagination>\r\n      }\r\n    </div >\r\n  );\r\n}\r\n","import React, { useEffect } from 'react';\r\nimport InfiniteScroll from 'react-infinite-scroll-component';\r\nimport Skeleton from 'react-loading-skeleton';\r\n\r\nimport { IConfigDisplayField, IConfigCustomAction, ICustomLabels } from '../../common/models/config.model';\r\nimport { IPaginationState } from '../../common/models/states.model';\r\nimport { dataHelpers } from '../../helpers/data.helpers';\r\nimport { Button } from '../button/button.comp';\r\nimport { Pagination } from '../pagination/pagination.comp';\r\n\r\nimport './cards.scss';\r\n\r\ninterface IProps {\r\n  items: any[]\r\n  pagination?: IPaginationState\r\n  callbacks: {\r\n    delete: ((item: any) => void) | null\r\n    put: ((item: any) => void) | null\r\n    action: (item: any, action: IConfigCustomAction) => void\r\n    getNextPage: (() => void) | null\r\n    getPreviousPage: (() => void) | null\r\n  }\r\n  fields: IConfigDisplayField[]\r\n  customActions?: IConfigCustomAction[]\r\n  customLabels?: ICustomLabels\r\n}\r\n\r\nexport const Cards = ({ items, fields, callbacks, customActions, customLabels, pagination }: IProps) => {\r\n  const editLabel: string = customLabels?.buttons?.editItem || 'Edit';\r\n  const deleteLabel: string = customLabels?.buttons?.deleteItem || 'Delete';\r\n  const paginationCallbacks = {\r\n    nextPage: callbacks.getNextPage || (() => { return; }),\r\n    previousPage: callbacks.getPreviousPage || (() => { return; }),\r\n  };\r\n\r\n  function renderRow(origField: IConfigDisplayField, origItem: any, value: any) {\r\n    if (origField.type === 'boolean') {\r\n      value = value ? true : false;\r\n    }\r\n\r\n    if (value && typeof value === 'object') {\r\n      return 'object';\r\n    }\r\n\r\n    switch (origField.type) {\r\n      case 'text':\r\n        return <span>{value}</span>;\r\n      case 'boolean':\r\n        return <div className={`bool ${value ? 'true' : 'false'}`}></div>;\r\n      case 'image':\r\n        if (!value) {\r\n          return <React.Fragment></React.Fragment>;\r\n        }\r\n        return <img src={value || ''} alt={value || origField.label || origField.name} onError={(e) => e.currentTarget.src = '/avatar.png' }/>;\r\n      case 'url':\r\n        let url: string = origField.url || value || '';\r\n\r\n        // Replace all url vars\r\n        fields.forEach((field) => {\r\n          const fieldValue = dataHelpers.extractDataByDataPath(origItem, field.dataPath, field.name);\r\n          url = url.replace(`:${field.name}`, fieldValue);\r\n        });\r\n\r\n        return <a href={url} target=\"_blank\" rel=\"noopener noreferrer\">{origField.urlLabel || value}</a>;\r\n      case 'colorbox':\r\n        return <div className=\"colorbox\" style={{ backgroundColor: value }}></div>;\r\n      case 'html':\r\n        const htmlCode = origField.htmlCode || '<span>{value}</span>';\r\n        const html =  htmlCode.replace('{value}', value);\r\n        return <div dangerouslySetInnerHTML={{__html: html}}></div>\r\n      default:\r\n        return value;\r\n    }\r\n  }\r\n\r\n  function renderActions(item: any, cardIdx: number) {\r\n    return (\r\n      <div className=\"actions-wrapper\">\r\n        {\r\n          callbacks.put &&\r\n          <Button onClick={() => callbacks.put?.(item)} title={editLabel}>\r\n            <i className=\"fa fa-pencil-square-o\" aria-hidden=\"true\"></i>\r\n          </Button>\r\n        }\r\n        {\r\n          (customActions && customActions.length > 0) &&\r\n          customActions.map((action, idx) => (\r\n            <Button key={`action_${cardIdx}_${idx}`} onClick={() => callbacks.action(item, action)} title={action.name}>\r\n              <i className={`fa fa-${action.icon || 'cogs'}`} aria-hidden=\"true\"></i>\r\n            </Button>\r\n          ))\r\n        }\r\n        {\r\n          callbacks.delete &&\r\n          <Button onClick={() => callbacks.delete?.(item)} title={deleteLabel}>\r\n            <i className=\"fa fa-times\" aria-hidden=\"true\"></i>\r\n          </Button>\r\n        }\r\n      </div>\r\n    );\r\n  }\r\n\r\n  function renderCard(item: any, cardIdx: number) {\r\n    return (\r\n      <div className=\"card\" key={`card_${cardIdx}`}>\r\n        {\r\n          fields.map((field, fieldIdx) => {\r\n            const value = dataHelpers.extractDataByDataPath(item, field.dataPath, field.name);\r\n            return (\r\n              <div className={`card-row ${field.type}`} key={`card_${cardIdx}_${fieldIdx}`}>\r\n                {\r\n                  field.type !== 'image' &&\r\n                  <label>{field.label || field.name}: </label>\r\n                }\r\n                {renderRow(field, item, value)}\r\n              </div>\r\n            );\r\n          })\r\n        }\r\n        {renderActions(item, cardIdx)}\r\n      </div>\r\n    );\r\n  }\r\n\r\n  function renderCardSkeleton(cardIdx: number) {\r\n    return (\r\n      <div className=\"card\" key={`card_${cardIdx}`}>\r\n        {\r\n          fields.map((field, fieldIdx) => {\r\n            return (\r\n              <div className={`card-row ${field.type}`} key={`card_${cardIdx}_${fieldIdx}`}>\r\n                {\r\n                  field.type !== 'image' &&\r\n                  <label>{field.label || field.name}: </label>\r\n                }\r\n                <Skeleton duration={0.6} />\r\n              </div>\r\n            );\r\n          })\r\n        }\r\n        {renderActions({}, cardIdx)}\r\n      </div>\r\n    );\r\n  }\r\n\r\n  function renderSkeletons() {\r\n    const startingIndex = items.length;\r\n    const skeletonsIndexes = Array.from(Array(pagination?.limit).keys()).map(value => value + startingIndex);\r\n    return skeletonsIndexes.map(renderCardSkeleton);\r\n  }\r\n\r\n  useEffect(() => {\r\n    if (\r\n      pagination?.type === 'infinite-scroll'\r\n      && document.body.clientHeight <= window.innerHeight\r\n      && callbacks.getNextPage\r\n      && pagination?.hasNextPage\r\n    ) {\r\n      callbacks.getNextPage();\r\n    }\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, []);\r\n\r\n  if (pagination?.type === 'infinite-scroll') {\r\n    return (\r\n      <InfiniteScroll className=\"cards-wrapper\"\r\n        dataLength={items.length}\r\n        next={callbacks.getNextPage || (() => null)}\r\n        hasMore={pagination?.hasNextPage || false}\r\n        loader={renderSkeletons()}\r\n      >\r\n        {items.map(renderCard)}\r\n      </InfiniteScroll>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <React.Fragment>\r\n      <div className=\"cards-wrapper\">\r\n        {items.map(renderCard)}\r\n      </div>\r\n      {\r\n        pagination &&\r\n        pagination.type === 'buttons' &&\r\n        <Pagination\r\n          callbacks={paginationCallbacks}\r\n          pagination={pagination}\r\n        ></Pagination>\r\n      }\r\n    </React.Fragment>\r\n  )\r\n}\r\n","import React, { useState } from \"react\";\r\nimport { orderBy } from \"natural-orderby\";\r\nimport { toast } from \"react-toastify\";\r\n\r\nimport {\r\n  IConfigInputField,\r\n  IConfigOptionSource,\r\n  ICustomLabels,\r\n} from \"../../common/models/config.model\";\r\nimport { Button } from \"../button/button.comp\";\r\nimport { withAppContext } from \"../withContext/withContext.comp\";\r\nimport { IAppContext } from \"../app.context\";\r\nimport { dataHelpers } from \"../../helpers/data.helpers\";\r\nimport locale from \"../../common/locale.js\";\r\n\r\nimport \"./formRow.scss\";\r\n\r\ninterface IProps {\r\n  context: IAppContext;\r\n  field: IConfigInputField;\r\n  onChange: (\r\n    fieldName: string,\r\n    value: any,\r\n    submitAfterChange?: boolean\r\n  ) => void;\r\n  showReset?: boolean;\r\n  direction?: \"row\" | \"column\";\r\n}\r\n\r\nexport const FormRow = withAppContext(\r\n  ({ context, field, direction, showReset, onChange }: IProps) => {\r\n    const [optionSources, setOptionSources] = useState<any>({});\r\n    const { httpService, activePage, config } = context;\r\n    const pageHeaders: any = activePage?.requestHeaders || {};\r\n    const customLabels: ICustomLabels | undefined = {\r\n      ...config?.customLabels,\r\n      ...activePage?.customLabels,\r\n    };\r\n    const addArrayItemLabel = customLabels?.buttons?.addArrayItem || \"Add Item\";\r\n    const clearLabel = customLabels?.buttons?.clearInput || \"Clear\";\r\n\r\n    async function loadOptionSourceFromRemote(\r\n      fieldName: string,\r\n      optionSource: IConfigOptionSource\r\n    ) {\r\n      try {\r\n        const { url, dataPath, actualMethod, requestHeaders } = optionSource;\r\n\r\n        if (!url) {\r\n          throw new Error(\r\n            `URL option source (for field \"${fieldName}\") is empty.`\r\n          );\r\n        }\r\n\r\n        const result = await httpService.fetch({\r\n          method: actualMethod || \"get\",\r\n          origUrl: url,\r\n          queryParams: [],\r\n          headers: Object.assign({}, pageHeaders, requestHeaders || {}),\r\n        });\r\n\r\n        const extractedData = dataHelpers.extractDataByDataPath(\r\n          result,\r\n          dataPath\r\n        );\r\n\r\n        if (!extractedData || !extractedData.length) {\r\n          throw new Error(\r\n            `Option source data is empty (for field \"${fieldName}\")`\r\n          );\r\n        }\r\n\r\n        // Map option source to fields\r\n        const optionSourceData = extractedData.map(\r\n          (option: any, idx: number) => {\r\n            const { valuePath, displayPath } = optionSource;\r\n\r\n            if (typeof option === \"string\") {\r\n              return option;\r\n            }\r\n\r\n            return {\r\n              display:\r\n                displayPath && option[displayPath]\r\n                  ? option[displayPath]\r\n                  : `Option ${idx + 1}`,\r\n              value:\r\n                valuePath && option[valuePath] ? option[valuePath] : `${idx}`,\r\n            };\r\n          }\r\n        );\r\n\r\n        setOptionSources({\r\n          ...optionSources,\r\n          [fieldName]: optionSourceData,\r\n        });\r\n      } catch (e) {\r\n        toast.error(e.message);\r\n      }\r\n    }\r\n\r\n    function addItemToFieldArray(e: any, originalField: IConfigInputField) {\r\n      e.preventDefault();\r\n\r\n      onChange(field.name, [...(originalField.value || []), \"\"]);\r\n    }\r\n\r\n    function removeItemToFieldArray(\r\n      originalField: IConfigInputField,\r\n      idx: number\r\n    ) {\r\n      const updatedArray = [...(originalField.value || [])];\r\n\r\n      updatedArray.splice(idx, 1);\r\n\r\n      onChange(field.name, updatedArray);\r\n    }\r\n\r\n    function renderArrayItems(originalField: IConfigInputField) {\r\n      const array: any[] = originalField.value || [];\r\n\r\n      return (\r\n        <div className=\"array-form\">\r\n          {array.map((item, itemIdx) => {\r\n            const inputField = renderFieldInput(\r\n              {\r\n                value: item,\r\n                name: `${originalField.name}.${itemIdx}`,\r\n              } as IConfigInputField,\r\n              (fieldName, value) => {\r\n                const updatedArray = (originalField.value || []).map(\r\n                  (localValue: any, idx: number) => {\r\n                    if (idx === itemIdx) {\r\n                      return value;\r\n                    }\r\n                    return localValue;\r\n                  }\r\n                );\r\n\r\n                onChange(originalField.name, updatedArray);\r\n              }\r\n            );\r\n\r\n            return (\r\n              <div className=\"array-form-item\" key={`array_form_${itemIdx}`}>\r\n                {inputField}\r\n                <i\r\n                  title={clearLabel}\r\n                  onClick={() => removeItemToFieldArray(originalField, itemIdx)}\r\n                  aria-label=\"Remove\"\r\n                  className=\"clear-input fa fa-times\"\r\n                ></i>\r\n              </div>\r\n            );\r\n          })}\r\n          <Button\r\n            className=\"add-array-item\"\r\n            onClick={(e) => addItemToFieldArray(e, originalField)}\r\n            title={addArrayItemLabel}\r\n          >\r\n            <i className=\"fa fa-plus\" aria-hidden=\"true\"></i>\r\n          </Button>\r\n        </div>\r\n      );\r\n    }\r\n\r\n    function renderFieldInput(\r\n      field: IConfigInputField,\r\n      changeCallback: (\r\n        fieldName: string,\r\n        value: any,\r\n        submitAfterChange?: boolean\r\n      ) => void\r\n    ) {\r\n      const inputProps = (defaultPlaceholder: string = \"\") => {\r\n        return {\r\n          value: field.value,\r\n          placeholder: field.placeholder || defaultPlaceholder,\r\n          disabled: field.readonly,\r\n          required: field.required,\r\n          onChange: (e: any) => changeCallback(field.name, e.target.value),\r\n        };\r\n      };\r\n\r\n      switch (field.type) {\r\n        case \"boolean\":\r\n          return (\r\n            <input\r\n              type=\"checkbox\"\r\n              {...inputProps()}\r\n              checked={field.value}\r\n              onChange={(e) =>\r\n                changeCallback(field.name, e.target.checked, true)\r\n              }\r\n            />\r\n          );\r\n        case \"select\": {\r\n          const { optionSource } = field;\r\n\r\n          if (optionSource && !optionSources[field.name]) {\r\n            loadOptionSourceFromRemote(field.name, optionSource);\r\n            return (\r\n              <select {...inputProps()}>\r\n                <option>-- Loading Options... --</option>\r\n              </select>\r\n            );\r\n          }\r\n\r\n          const sortBy = field.optionSource?.sortBy;\r\n          const finalOptions: { value: string; display: string }[] =\r\n            optionSources[field.name] || field.options || [];\r\n          const sortedOptions = orderBy(\r\n            finalOptions,\r\n            typeof sortBy === \"string\" ? [sortBy] : sortBy || []\r\n          );\r\n\r\n          return (\r\n            <select {...inputProps()}>\r\n              <option>{locale.select}</option>\r\n              {sortedOptions.map((option, idx) => {\r\n                const key = `option_${idx}_`;\r\n                if (typeof option !== \"object\") {\r\n                  return (\r\n                    <option key={`${key}_${option}`} value={option}>\r\n                      {option}\r\n                    </option>\r\n                  );\r\n                }\r\n                return (\r\n                  <option key={`${key}_${option.value}`} value={option.value}>\r\n                    {option.display || option.value}\r\n                  </option>\r\n                );\r\n              })}\r\n            </select>\r\n          );\r\n        }\r\n        case \"object\":\r\n          return (\r\n            <textarea\r\n              {...inputProps(\r\n                customLabels?.placeholders?.object || \"Enter JSON...\"\r\n              )}\r\n            ></textarea>\r\n          );\r\n        case \"array\": {\r\n          const { arrayType, value } = field;\r\n          if (!value || !arrayType || arrayType === \"object\") {\r\n            return (\r\n              <textarea\r\n                {...inputProps(\r\n                  customLabels?.placeholders?.array || \"Enter JSON array...\"\r\n                )}\r\n              ></textarea>\r\n            );\r\n          }\r\n          return renderArrayItems(field);\r\n        }\r\n        case \"long-text\":\r\n          return (\r\n            <textarea\r\n              {...inputProps(\r\n                customLabels?.placeholders?.text || locale.enter_text\r\n              )}\r\n            ></textarea>\r\n          );\r\n        case \"number\":\r\n        case \"integer\":\r\n          return (\r\n            <input\r\n              type=\"number\"\r\n              {...inputProps(customLabels?.placeholders?.number || \"0\")}\r\n              onChange={(e) =>\r\n                changeCallback(field.name, e.target.valueAsNumber)\r\n              }\r\n            />\r\n          );\r\n        case \"color\":\r\n          return (\r\n            <input\r\n              type=\"color\"\r\n              {...inputProps(\r\n                customLabels?.placeholders?.color || \"Enter color...\"\r\n              )}\r\n            />\r\n          );\r\n        case \"email\":\r\n          return (\r\n            <input\r\n              type=\"email\"\r\n              {...inputProps(\r\n                customLabels?.placeholders?.email || \"Enter email...\"\r\n              )}\r\n            />\r\n          );\r\n        case \"password\":\r\n          return (\r\n            <input\r\n              type=\"password\"\r\n              {...inputProps(\r\n                customLabels?.placeholders?.password || \"Enter password...\"\r\n              )}\r\n            />\r\n          );\r\n        case \"hidden\":\r\n          return <input type=\"hidden\" value={field.value} />;\r\n        case \"file\":\r\n          return (\r\n            <input\r\n              type=\"file\"\r\n              accept={field.accept || \"*\"}\r\n              placeholder={\r\n                field.placeholder ||\r\n                customLabels?.placeholders?.file ||\r\n                \"Select file...\"\r\n              }\r\n              name={field.name || \"file\"}\r\n              disabled={field.readonly}\r\n              required={field.required}\r\n            />\r\n          );\r\n        case \"note\":\r\n          return <p className=\"note\">{field.value}</p>;\r\n        case \"date\":\r\n          return (\r\n            <input\r\n              type=\"date\"\r\n              {...inputProps(\r\n                customLabels?.placeholders?.date || \"Enter date...\"\r\n              )}\r\n            />\r\n          );\r\n        case \"text\":\r\n        default:\r\n          return (\r\n            <input\r\n              type=\"text\"\r\n              {...inputProps(\r\n                customLabels?.placeholders?.text || locale.enter_text\r\n              )}\r\n            />\r\n          );\r\n      }\r\n    }\r\n\r\n    return (\r\n      <div className={`form-row ${direction || \"row\"}`}>\r\n        {field.type !== \"hidden\" && (\r\n          <label>\r\n            {field.label || field.originalName}\r\n            {field.required ? \" *\" : \"\"}\r\n          </label>\r\n        )}\r\n        {renderFieldInput(field, onChange)}\r\n        {showReset &&\r\n          !field.readonly &&\r\n          field.value &&\r\n          field.value.length > 0 && (\r\n            <i\r\n              title={clearLabel}\r\n              onClick={() => onChange(field.name, \"\", true)}\r\n              aria-label=\"Clear\"\r\n              className=\"clear-input fa fa-times\"\r\n            ></i>\r\n          )}\r\n      </div>\r\n    );\r\n  }\r\n);\r\n","import React, { useState, useEffect } from \"react\";\r\n\r\nimport {\r\n  IConfigInputField,\r\n  IConfigPagination,\r\n} from \"../../common/models/config.model\";\r\nimport { FormRow } from \"../formRow/formRow.comp\";\r\nimport { Button } from \"../button/button.comp\";\r\nimport locale from \"../../common/locale.js\";\r\n\r\nimport \"./queryParams.scss\";\r\n\r\ninterface IProps {\r\n  initialParams: IConfigInputField[];\r\n  paginationConfig?: IConfigPagination;\r\n  submitCallback: (queryParams: IConfigInputField[], reset?: boolean) => void;\r\n}\r\n\r\nexport const QueryParams = ({\r\n  initialParams,\r\n  paginationConfig,\r\n  submitCallback,\r\n}: IProps) => {\r\n  const [queryParams, setQueryParams] = useState<IConfigInputField[]>(\r\n    initialParams\r\n  );\r\n\r\n  function submit(e?: any) {\r\n    if (e) {\r\n      e.preventDefault();\r\n    }\r\n    if (paginationConfig && paginationConfig.type === \"infinite-scroll\") {\r\n      submitCallback(queryParams, true);\r\n    } else {\r\n      submitCallback(queryParams);\r\n    }\r\n  }\r\n\r\n  function formChanged(\r\n    fieldName: string,\r\n    value: any,\r\n    submitAfterChange?: boolean\r\n  ) {\r\n    const updatedQueryParams: IConfigInputField[] = [...queryParams].map(\r\n      (field) => {\r\n        if (field.name === fieldName) {\r\n          field.value = value;\r\n        }\r\n        return field;\r\n      }\r\n    );\r\n    setQueryParams(updatedQueryParams);\r\n    if (submitAfterChange) {\r\n      submit();\r\n    }\r\n  }\r\n\r\n  useEffect(() => {\r\n    if (paginationConfig && paginationConfig.type === \"infinite-scroll\") {\r\n      const filteredParams = initialParams.filter(\r\n        (param) => ![\"page\", \"limit\"].includes(param.name)\r\n      );\r\n      setQueryParams(filteredParams);\r\n    } else {\r\n      setQueryParams(initialParams);\r\n    }\r\n  }, [paginationConfig, initialParams]);\r\n  if (!queryParams.length) {\r\n    return <React.Fragment></React.Fragment>;\r\n  }\r\n\r\n  return (\r\n    <section className=\"query-params-form\">\r\n      <h5>{locale.search}</h5>\r\n      <form onSubmit={submit}>\r\n        {queryParams.map((queryParam, idx) => {\r\n          //if(queryParam.name == 'page') return \"\";\r\n          if (queryParam.hidden) return \"\";\r\n          return (\r\n            <FormRow\r\n              key={`query_param_${idx}`}\r\n              field={queryParam}\r\n              onChange={formChanged}\r\n              showReset={!queryParam.type || queryParam.type === \"text\"}\r\n            />\r\n          );\r\n        })}\r\n        <Button type=\"submit\" onClick={submit}>\r\n          {locale.submit}\r\n        </Button>\r\n      </form>\r\n    </section>\r\n  );\r\n};\r\n","import React, { Component, RefObject, ReactChild } from 'react';\r\nimport ReactDOM from 'react-dom';\r\n\r\nimport './popup.scss';\r\nimport { ICustomLabels } from '../../common/models/config.model';\r\n\r\ninterface IPopupProps {\r\n  className?: string\r\n  style?: any\r\n  show: boolean\r\n  closeCallback: any\r\n  children: ReactChild\r\n  refCallback?: string | ((instance: HTMLDivElement | null) => void) | RefObject<HTMLDivElement> | null | undefined\r\n  customLabels?: ICustomLabels\r\n}\r\n\r\nlet portalRoot: HTMLDivElement = document.getElementById('popup-portal') as HTMLDivElement;\r\nif (!portalRoot) {\r\n  portalRoot = document.createElement('div');\r\n  portalRoot.setAttribute('id', 'popup-portal');\r\n  document.body.append(portalRoot);\r\n}\r\n\r\nclass PortalPopup extends Component {\r\n  private el: HTMLElement;\r\n\r\n  constructor(props: any) {\r\n    super(props);\r\n\r\n    this.el = document.createElement('div');\r\n  }\r\n\r\n  componentDidMount = () => {\r\n    portalRoot.appendChild(this.el);\r\n  }\r\n\r\n  componentWillUnmount = () => {\r\n    portalRoot.removeChild(this.el);\r\n  }\r\n\r\n  render() {\r\n    return ReactDOM.createPortal(this.props.children, this.el);\r\n  }\r\n}\r\n\r\nexport class Popup extends Component<IPopupProps> {\r\n  render() {\r\n    const style: any = Object.assign({}, { display: this.props.show ? 'block' : 'none' }, this.props.style || {});\r\n    const closeLabel = this.props.customLabels?.buttons?.closeForm || 'Close';\r\n\r\n    return (\r\n      <PortalPopup>\r\n        {\r\n          this.props.show ?\r\n            <div className={`popup ${this.props.className || ''}`} style={style}>\r\n              <div className=\"overlay\" onClick={(e: any) => this.props.closeCallback(e)}></div>\r\n              <div className=\"popup-content\" ref={this.props.refCallback}>\r\n                {this.props.children}\r\n                <button title={closeLabel} className=\"close-popup\" onClick={(e: any) => this.props.closeCallback(e)}>\r\n                  <i className=\"fa fa-times\" aria-hidden=\"true\"></i>\r\n                </button>\r\n              </div>\r\n            </div> :\r\n            null\r\n        }\r\n      </PortalPopup>\r\n    );\r\n  }\r\n\r\n  componentDidMount() {\r\n    document.addEventListener('keydown', this._handleKeyDown.bind(this));\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    document.removeEventListener('keydown', this._handleKeyDown.bind(this));\r\n  }\r\n\r\n  _handleKeyDown = (e: KeyboardEvent) => {\r\n    const { show, closeCallback } = this.props;\r\n\r\n    if (show && e.keyCode === 27) {\r\n      closeCallback(e);\r\n    }\r\n  }\r\n};","import { IConfigInputField } from '../common/models/config.model';\r\n\r\nclass FileHelpers {\r\n\r\n  public isMultipartForm(fields: IConfigInputField[]): boolean {\r\n    for (const fieldIndex in fields) {\r\n      let field = fields[fieldIndex];\r\n\r\n      if (field.type === 'file') {\r\n        return true;\r\n      }\r\n    }\r\n\r\n    return false;\r\n  }\r\n\r\n  \r\n}\r\n\r\nexport const fileHelpers = new FileHelpers();","import React, { useState, useEffect } from \"react\";\r\nimport { toast } from \"react-toastify\";\r\n\r\nimport { Popup } from \"../popup/popup.comp\";\r\nimport {\r\n  IConfigInputField,\r\n  IConfigGetSingleMethod,\r\n  IConfigPostMethod,\r\n  IConfigPutMethod,\r\n  ICustomLabels,\r\n  IQueryParam,\r\n} from \"../../common/models/config.model\";\r\nimport { FormRow } from \"../formRow/formRow.comp\";\r\nimport { Button } from \"../button/button.comp\";\r\nimport { Loader } from \"../loader/loader.comp\";\r\nimport { dataHelpers } from \"../../helpers/data.helpers\";\r\nimport { fileHelpers } from \"../../helpers/file.helpers\";\r\nimport { IAppContext } from \"../app.context\";\r\nimport { withAppContext } from \"../withContext/withContext.comp\";\r\n\r\nimport \"./formPopup.scss\";\r\nimport locale from \"../../common/locale\";\r\n\r\nconst unflatten = require(\"flat\").unflatten;\r\n\r\ninterface IProps {\r\n  context: IAppContext;\r\n  title: string;\r\n  fields: IConfigInputField[];\r\n  rawData?: any;\r\n  getSingleConfig?: IConfigGetSingleMethod;\r\n  methodConfig: IConfigPostMethod | IConfigPutMethod;\r\n  closeCallback: (reloadData: boolean) => void;\r\n  submitCallback: (\r\n    body: any,\r\n    containFiles: boolean,\r\n    queryParams: IQueryParam[]\r\n  ) => void;\r\n}\r\n\r\nexport const FormPopup = withAppContext(\r\n  ({\r\n    context,\r\n    title,\r\n    fields,\r\n    rawData,\r\n    getSingleConfig,\r\n    methodConfig,\r\n    submitCallback,\r\n    closeCallback,\r\n  }: IProps) => {\r\n    const fieldsCopy: IConfigInputField[] = JSON.parse(JSON.stringify(fields));\r\n    const { httpService, activePage, config } = context;\r\n    const [loading, setLoading] = useState<boolean>(true);\r\n    const [formFields, setFormFields] = useState<IConfigInputField[]>([]);\r\n    const [finalRawData, setFinalRawData] = useState<any>(null);\r\n    const pageHeaders: any = activePage?.requestHeaders || {};\r\n    const customLabels: ICustomLabels | undefined = {\r\n      ...config?.customLabels,\r\n      ...activePage?.customLabels,\r\n    };\r\n\r\n    async function initFormFields() {\r\n      let finalRawData: any = rawData || {};\r\n\r\n      if (getSingleConfig && getSingleConfig.url) {\r\n        try {\r\n          const {\r\n            url,\r\n            requestHeaders,\r\n            actualMethod,\r\n            dataPath,\r\n            queryParams,\r\n            responseType,\r\n          } = getSingleConfig;\r\n          const result = await httpService.fetch({\r\n            method: actualMethod || \"get\",\r\n            origUrl: url,\r\n            queryParams,\r\n            headers: Object.assign({}, pageHeaders, requestHeaders || {}),\r\n            rawData,\r\n            responseType,\r\n          });\r\n\r\n          const extractedData = dataHelpers.extractDataByDataPath(\r\n            result,\r\n            dataPath\r\n          );\r\n\r\n          if (\r\n            extractedData &&\r\n            (typeof extractedData === \"object\" ||\r\n              typeof extractedData === \"string\")\r\n          ) {\r\n            finalRawData = extractedData;\r\n          }\r\n        } catch (e) {\r\n          console.error(\"Could not load single item's data.\", e);\r\n          toast.error(\"Could not load single item's data.\");\r\n        }\r\n      }\r\n\r\n      setFinalRawData(finalRawData); // Store the raw data for later.\r\n\r\n      setFormFields(\r\n        fieldsCopy.map((field) => {\r\n          let key = field.name;\r\n\r\n          field.originalName = field.name;\r\n\r\n          let dataPathSplit: string[] = [];\r\n\r\n          if (field.dataPath) {\r\n            dataPathSplit = field.dataPath.split(\".\");\r\n            key = `${field.dataPath}.${field.name}`;\r\n          }\r\n\r\n          const lookup = () => {\r\n            let objToLookIn = finalRawData;\r\n            for (const pathElem of dataPathSplit) {\r\n              if (\r\n                objToLookIn[pathElem] !== undefined &&\r\n                objToLookIn[pathElem] !== null\r\n              ) {\r\n                objToLookIn = objToLookIn[pathElem];\r\n              } else {\r\n                return undefined;\r\n              }\r\n            }\r\n            return objToLookIn[field.name];\r\n          };\r\n\r\n          const lookupValue = lookup();\r\n\r\n          // Changing field name to include datapath\r\n          // This will use us later for unflatten the final object\r\n          field.name = key;\r\n\r\n          if (dataHelpers.checkIfFieldIsObject(field)) {\r\n            if (lookupValue || field.value) {\r\n              field.value =\r\n                JSON.stringify(lookupValue || field.value, null, \"  \") || \"\";\r\n            }\r\n            return field;\r\n          }\r\n\r\n          if (field.type === \"array\") {\r\n            field.value = lookupValue || field.value || [];\r\n            return field;\r\n          }\r\n\r\n          if (typeof lookupValue !== \"undefined\") {\r\n            field.value = lookupValue;\r\n          } else {\r\n            // important in order to prevent controlled / uncontrolled components error\r\n            field.value = typeof field.value === \"undefined\" ? \"\" : field.value;\r\n          }\r\n\r\n          if (\r\n            (field.type === \"long-text\" || field.type === \"text\") &&\r\n            typeof finalRawData === \"string\"\r\n          ) {\r\n            field.value = finalRawData;\r\n          }\r\n\r\n          return field;\r\n        })\r\n      );\r\n\r\n      setLoading(false);\r\n    }\r\n\r\n    async function submitForm(e: any) {\r\n      e.preventDefault();\r\n\r\n      const finalObject: any = (methodConfig as IConfigPutMethod)\r\n        .includeOriginalFields\r\n        ? Object.assign({}, finalRawData)\r\n        : {};\r\n      const formData = new FormData();\r\n      const containFiles: boolean = fileHelpers.isMultipartForm(formFields);\r\n      let validationError = null;\r\n\r\n      var queryParams: IQueryParam[] = [];\r\n\r\n      formFields.forEach((field) => {\r\n        if (field.type === \"file\") {\r\n          const fileInput: any = document.querySelector(\r\n            `input[name=\"${field.name || \"file\"}\"]`\r\n          ) as HTMLInputElement;\r\n\r\n          if (fileInput.files.length > 0) {\r\n            const firstFile = fileInput.files[0];\r\n            formData.append(field.name || \"file\", firstFile, firstFile.name);\r\n          }\r\n          return;\r\n        }\r\n\r\n        finalObject[field.name] = field.value;\r\n\r\n        if (containFiles && !field.useInUrl) {\r\n          formData.append(field.name, field.value);\r\n        }\r\n\r\n        // eslint-disable-next-line eqeqeq\r\n        if (\r\n          field.required &&\r\n          field.type !== \"boolean\" &&\r\n          !field.value &&\r\n          field.value != 0\r\n        ) {\r\n          validationError = \"Please fill up all required fields.\";\r\n        }\r\n\r\n        if (dataHelpers.checkIfFieldIsObject(field) && field.value) {\r\n          try {\r\n            finalObject[field.name] = JSON.parse(field.value);\r\n          } catch (e) {\r\n            validationError = `Invalid JSON for field \"${field.name}\".`;\r\n          }\r\n        }\r\n\r\n        if (field.type === \"boolean\") {\r\n          finalObject[field.name] = field.value || false;\r\n        }\r\n\r\n        if (field.type === \"encode\") {\r\n          finalObject[field.name] = encodeURIComponent(field.value);\r\n        }\r\n\r\n        if (field.useInUrl) {\r\n          queryParams.push({ name: field.name, value: field.value });\r\n        }\r\n      });\r\n\r\n      if (validationError) {\r\n        toast.error(validationError);\r\n        return;\r\n      }\r\n\r\n      setLoading(true);\r\n\r\n      try {\r\n        const body = containFiles ? formData : unflatten(finalObject);\r\n        await submitCallback(body, containFiles, queryParams);\r\n\r\n        toast.success(\"Great Success!\");\r\n\r\n        closeCallback(true);\r\n      } catch (e) {\r\n        toast.error(e.message);\r\n      }\r\n\r\n      setLoading(false);\r\n    }\r\n\r\n    function formChanged(fieldName: string, value: any) {\r\n      let updatedFormFields: IConfigInputField[] = JSON.parse(\r\n        JSON.stringify(formFields)\r\n      );\r\n\r\n      updatedFormFields = updatedFormFields.map((field: IConfigInputField) => {\r\n        if (field.name === fieldName) {\r\n          field.value = value;\r\n        }\r\n\r\n        return field;\r\n      });\r\n\r\n      setFormFields(updatedFormFields);\r\n    }\r\n\r\n    useEffect(() => {\r\n      initFormFields();\r\n      // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    }, []);\r\n\r\n    return (\r\n      <Popup\r\n        show={true}\r\n        className=\"form-popup\"\r\n        closeCallback={() => closeCallback(false)}\r\n        customLabels={customLabels}\r\n      >\r\n        <React.Fragment>\r\n          <h2>{title}</h2>\r\n          <section>\r\n            {loading ? (\r\n              <Loader />\r\n            ) : (\r\n              <form onSubmit={submitForm}>\r\n                {formFields.map((field, idx) => {\r\n                  return (\r\n                    <div>\r\n                      <FormRow\r\n                        key={`field_${idx}`}\r\n                        field={field}\r\n                        onChange={formChanged}\r\n                        showReset={!field.type || field.type === \"text\"}\r\n                      />\r\n                      <br />\r\n                      <hr />\r\n                    </div>\r\n                  );\r\n                })}\r\n                <div className=\"buttons-wrapper center\">\r\n                  <Button type=\"submit\" onClick={submitForm} color=\"green\">\r\n                    {locale.submit}\r\n                  </Button>\r\n                </div>\r\n              </form>\r\n            )}\r\n          </section>\r\n        </React.Fragment>\r\n      </Popup>\r\n    );\r\n  }\r\n);\r\n","import React from 'react';\r\n\r\nimport './filterField.scss';\r\n\r\ninterface IProps {\r\n  onChange: (filter: string) => void\r\n}\r\n\r\nexport const FilterField = ({ onChange }: IProps) => {\r\n  return (\r\n    <section className=\"filter-wrapper\">\r\n      <h5>Filter:</h5>\r\n      <div className=\"form-row\">\r\n        <input type=\"text\" placeholder=\"Search...\" onChange={(e) => onChange(e.target.value.toLowerCase())} />\r\n      </div>\r\n    </section>\r\n  );\r\n};","import { IPaginationState, IQueryPaginationState, IBodyPaginationState } from \"./states.model\";\r\n\r\nexport const isQueryPaginationState = (obj: IPaginationState): obj is IQueryPaginationState => {\r\n    return obj.source === 'query';\r\n}\r\n\r\nexport const isBodyPaginationState = (obj: IPaginationState): obj is IBodyPaginationState => {\r\n    return obj.source === 'body';\r\n}","import { IConfigPagination, IConfigBodyPagination, IConfigQueryPagination } from \"./config.model\";\r\n\r\nexport const isQueryPagination = (obj: IConfigPagination): obj is IConfigQueryPagination => {\r\n    return obj.source === 'query';\r\n}\r\n\r\nexport const isBodyPagination = (obj: IConfigPagination): obj is IConfigBodyPagination => {\r\n    return obj.source === 'body';\r\n}\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { useParams, useHistory } from \"react-router-dom\";\r\nimport * as QueryString from \"query-string\";\r\nimport { toast } from \"react-toastify\";\r\nimport { orderBy } from \"natural-orderby\";\r\nimport { find, remove } from \"lodash\";\r\n\r\nimport { IAppContext } from \"../app.context\";\r\nimport {\r\n  IConfigPage,\r\n  IConfigMethods,\r\n  IConfigGetAllMethod,\r\n  IConfigPostMethod,\r\n  IConfigPutMethod,\r\n  IConfigDeleteMethod,\r\n  IConfigInputField,\r\n  IConfigCustomAction,\r\n  IConfigGetSingleMethod,\r\n  ICustomLabels,\r\n  IConfigPagination,\r\n} from \"../../common/models/config.model\";\r\nimport {\r\n  IPaginationState,\r\n  IQueryPaginationState,\r\n  IBodyPaginationState,\r\n} from \"../../common/models/states.model\";\r\nimport { withAppContext } from \"../withContext/withContext.comp\";\r\nimport { Loader } from \"../loader/loader.comp\";\r\nimport { dataHelpers } from \"../../helpers/data.helpers\";\r\nimport { paginationHelpers } from \"../../helpers/pagination.helpers\";\r\nimport { Table } from \"../table/table.comp\";\r\nimport { Cards } from \"../cards/cards.comp\";\r\nimport { QueryParams } from \"../queryParams/queryParams.comp\";\r\nimport { Button } from \"../button/button.comp\";\r\nimport { FormPopup } from \"../formPopup/formPopup.comp\";\r\nimport { FilterField } from \"../filterField/filterField.comp\";\r\nimport {\r\n  isQueryPaginationState,\r\n  isBodyPaginationState,\r\n} from \"../../common/models/states.types.helper\";\r\nimport {\r\n  isQueryPagination,\r\n  isBodyPagination,\r\n} from \"../../common/models/config.types.helper\";\r\nimport locale from \"../../common/locale.js\";\r\n\r\nimport \"./page.scss\";\r\n\r\ninterface IProps {\r\n  context: IAppContext;\r\n}\r\n\r\ninterface IPopupProps {\r\n  type: \"add\" | \"update\" | \"action\";\r\n  title: string;\r\n  config: IConfigPostMethod | IConfigPutMethod;\r\n  submitCallback: (body: any, containFiles: boolean) => void;\r\n  getSingleConfig?: IConfigGetSingleMethod;\r\n  rawData?: {};\r\n}\r\n\r\nconst buildInitQueryParamsAndPaginationState = (\r\n  initQueryParams: IConfigInputField[],\r\n  paginationConfig?: IConfigPagination\r\n): {\r\n  initQueryParams: IConfigInputField[];\r\n  initialPagination?: IPaginationState;\r\n} => {\r\n  let initialPagination: IPaginationState | undefined = undefined;\r\n\r\n  if (paginationConfig) {\r\n    if (isQueryPagination(paginationConfig)) {\r\n      initialPagination = {\r\n        source: paginationConfig.source,\r\n        type: paginationConfig.type,\r\n        page: parseInt(paginationConfig.params?.page?.value || \"1\"),\r\n        limit: parseInt(paginationConfig.params?.limit?.value || \"10\"),\r\n        descending:\r\n          paginationConfig.params?.descending?.value === \"true\" || false,\r\n        hasPreviousPage: false,\r\n        hasNextPage: false,\r\n        sortBy: paginationConfig.params?.sortBy?.value,\r\n      };\r\n\r\n      if (!find(initQueryParams, { name: \"page\" })) {\r\n        initQueryParams.push({\r\n          name: paginationConfig?.params?.page?.name,\r\n          label: paginationConfig?.params?.page?.label || \"Page\",\r\n          value: initialPagination?.page,\r\n        });\r\n      }\r\n\r\n      if (\r\n        paginationConfig?.params?.limit &&\r\n        !find(initQueryParams, { name: \"limit\" })\r\n      ) {\r\n        initQueryParams.push({\r\n          name: paginationConfig.params.limit.name,\r\n          label: paginationConfig.params.limit.label || \"Limit\",\r\n          value: initialPagination?.limit,\r\n        });\r\n      }\r\n\r\n      if (\r\n        paginationConfig?.params?.descending &&\r\n        !find(initQueryParams, { name: \"descending\" })\r\n      ) {\r\n        initQueryParams.push({\r\n          name: paginationConfig.params.descending.name,\r\n          label: paginationConfig.params.descending.label || \"Descending\",\r\n          value: initialPagination?.descending,\r\n        });\r\n      }\r\n\r\n      if (\r\n        paginationConfig?.params?.sortBy &&\r\n        !find(initQueryParams, { name: \"sortBy\" })\r\n      ) {\r\n        initQueryParams.push({\r\n          name: paginationConfig.params.sortBy.name,\r\n          label: \"Sort by\",\r\n          value: initialPagination?.sortBy,\r\n        });\r\n      }\r\n    } else if (isBodyPagination(paginationConfig)) {\r\n      initialPagination = {\r\n        source: \"body\",\r\n        type: paginationConfig.type,\r\n        hasNextPage: false,\r\n        hasPreviousPage: false,\r\n        next: null,\r\n        previous: null,\r\n        limit: parseInt(paginationConfig.params?.limit?.value || \"10\"),\r\n      };\r\n\r\n      if (\r\n        paginationConfig?.params?.limit &&\r\n        !find(initQueryParams, { name: \"limit\" })\r\n      ) {\r\n        initQueryParams.push({\r\n          name: paginationConfig.params.limit.name,\r\n          label: paginationConfig.params.limit.label || \"Limit\",\r\n          value: initialPagination?.limit,\r\n        });\r\n      }\r\n    } else {\r\n      throw new Error(\"unrecognized pagination\");\r\n    }\r\n  }\r\n\r\n  return {\r\n    initQueryParams,\r\n    initialPagination,\r\n  };\r\n};\r\n\r\nconst PageComp = ({ context }: IProps) => {\r\n  const { page }: any = useParams();\r\n  const { push, location } = useHistory();\r\n  const { activePage, error, setError, httpService, config } = context;\r\n  const pageHeaders: any = activePage?.requestHeaders || {};\r\n  const pageMethods: IConfigMethods | undefined = activePage?.methods;\r\n  const customActions: IConfigCustomAction[] = activePage?.customActions || [];\r\n  const getAllConfig: IConfigGetAllMethod | undefined = pageMethods?.getAll;\r\n  const paginationConfig = getAllConfig?.pagination;\r\n  const infiniteScroll = paginationConfig?.type === \"infinite-scroll\";\r\n  const getSingleConfig: IConfigGetSingleMethod | undefined =\r\n    pageMethods?.getSingle;\r\n  const postConfig: IConfigPostMethod | undefined = pageMethods?.post;\r\n  const putConfig: IConfigPutMethod | undefined = pageMethods?.put;\r\n  const deleteConfig: IConfigDeleteMethod | undefined = pageMethods?.delete;\r\n  const customLabels: ICustomLabels | undefined = {\r\n    ...config?.customLabels,\r\n    ...activePage?.customLabels,\r\n  };\r\n  const addItemLabel =\r\n    customLabels?.buttons?.addItem ||\r\n    \"+ \" + locale.add + \" \" + activePage?.itemName;\r\n  const addItemFormTitle =\r\n    customLabels?.formTitles?.addItem ||\r\n    locale.add + \" \" + activePage?.itemName;\r\n  const editItemFormTitle =\r\n    customLabels?.formTitles?.editItem ||\r\n    locale.update + \" \" + activePage?.itemName;\r\n  const {\r\n    initQueryParams,\r\n    initialPagination,\r\n  } = buildInitQueryParamsAndPaginationState(\r\n    getAllConfig?.queryParams || [],\r\n    paginationConfig\r\n  );\r\n  const [loading, setLoading] = useState<boolean>(false);\r\n  const [openedPopup, setOpenedPopup] = useState<null | IPopupProps>(null);\r\n  const [queryParams, setQueryParams] = useState<IConfigInputField[]>(\r\n    initQueryParams\r\n  );\r\n  const [pagination, setPagination] = useState<IPaginationState | undefined>(\r\n    initialPagination\r\n  );\r\n  const [items, setItems] = useState<any[]>([]);\r\n  const [filter, setFilter] = useState<string>(\"\");\r\n\r\n  function closeFormPopup(refreshData: boolean = false) {\r\n    setOpenedPopup(null);\r\n\r\n    if (refreshData === true) {\r\n      if (pagination?.type === \"infinite-scroll\") {\r\n        setItems([]);\r\n        const updatedParams = [...queryParams];\r\n        remove(updatedParams, (param) =>\r\n          [\"page\", \"limit\"].includes(param.name)\r\n        );\r\n        setQueryParams(\r\n          buildInitQueryParamsAndPaginationState(\r\n            updatedParams,\r\n            paginationConfig\r\n          ).initQueryParams\r\n        );\r\n      } else {\r\n        getAllRequest();\r\n      }\r\n    }\r\n  }\r\n\r\n  async function openEditPopup(rawData: any) {\r\n    const params: IPopupProps = {\r\n      rawData,\r\n      type: \"update\",\r\n      title: editItemFormTitle,\r\n      config: putConfig as IConfigPutMethod,\r\n      getSingleConfig,\r\n      submitCallback: async (body: any, containFiles: boolean) => {\r\n        return await updateItem(body, rawData, containFiles);\r\n      },\r\n    };\r\n\r\n    setOpenedPopup(params);\r\n  }\r\n\r\n  function openCustomActionPopup(rawData: any, action: IConfigCustomAction) {\r\n    const params: IPopupProps = {\r\n      rawData,\r\n      type: \"action\",\r\n      title: action.name || \"Custom Action\",\r\n      config: action as IConfigCustomAction,\r\n      submitCallback: async (body: any, containFiles: boolean) => {\r\n        return await performAction(body, rawData, action, containFiles);\r\n      },\r\n    };\r\n\r\n    setOpenedPopup(params);\r\n  }\r\n\r\n  async function performAction(\r\n    body: any,\r\n    rawData: any,\r\n    action: IConfigCustomAction,\r\n    containFiles: boolean\r\n  ) {\r\n    const { url, requestHeaders, actualMethod } = action;\r\n\r\n    return await httpService.fetch({\r\n      method: actualMethod || \"put\",\r\n      origUrl: url,\r\n      rawData,\r\n      body: containFiles ? body : JSON.stringify(body),\r\n      headers: {\r\n        ...pageHeaders,\r\n        ...(requestHeaders || {}),\r\n        ...(containFiles ? {} : { \"content-type\": \"application/json\" }),\r\n      },\r\n      responseType: \"boolean\",\r\n    });\r\n  }\r\n\r\n  function extractQueryParams(\r\n    params: IConfigInputField[]\r\n  ): IConfigInputField[] {\r\n    if (!paginationConfig || isQueryPagination(paginationConfig)) {\r\n      const parsedParams = QueryString.parse(location.search);\r\n      const finalQueryParams = params.map((queryParam) => {\r\n        if (typeof parsedParams[queryParam.name] !== \"undefined\") {\r\n          queryParam.value =\r\n            queryParam.type === \"boolean\"\r\n              ? parsedParams[queryParam.name] === \"true\"\r\n              : decodeURIComponent(parsedParams[queryParam.name] as any);\r\n        } else {\r\n          queryParam.value = queryParam.value || \"\";\r\n        }\r\n        return queryParam;\r\n      });\r\n\r\n      setPagination(getUpdatedPaginationState(finalQueryParams, null));\r\n\r\n      return finalQueryParams;\r\n    } else {\r\n      return params;\r\n    }\r\n  }\r\n\r\n  async function fetchPageData(params: {\r\n    actualMethod: \"get\" | \"put\" | \"post\" | \"patch\" | \"delete\";\r\n    url: string;\r\n    requestHeaders?: any;\r\n    dataPath: string;\r\n    dataTransform: any;\r\n    sortBy: any;\r\n  }) {\r\n    const result = await httpService.fetch({\r\n      method: params.actualMethod || \"get\",\r\n      origUrl: params.url,\r\n      queryParams,\r\n      headers: Object.assign({}, pageHeaders, params.requestHeaders || {}),\r\n    });\r\n    let extractedData = dataHelpers.extractDataByDataPath(\r\n      result,\r\n      params.dataPath\r\n    );\r\n\r\n    if (!extractedData) {\r\n      throw new Error(\"Could not extract data from response.\");\r\n    }\r\n\r\n    if (!Array.isArray(extractedData)) {\r\n      throw new Error(\"Extracted data is invalid.\");\r\n    }\r\n\r\n    if (typeof params.dataTransform === \"function\") {\r\n      extractedData = await params.dataTransform(extractedData);\r\n    }\r\n\r\n    const orderedItems = orderBy(\r\n      extractedData,\r\n      typeof params.sortBy === \"string\" ? [params.sortBy] : params.sortBy || []\r\n    );\r\n\r\n    if (paginationConfig) {\r\n      const total = paginationConfig.fields?.total\r\n        ? dataHelpers.extractDataByDataPath(\r\n            result,\r\n            paginationConfig.fields.total.dataPath\r\n          )\r\n        : undefined;\r\n      const newPaginationState = getUpdatedPaginationState(\r\n        queryParams,\r\n        result,\r\n        total\r\n      );\r\n      if (newPaginationState) {\r\n        setPagination(newPaginationState);\r\n      }\r\n    }\r\n\r\n    if (infiniteScroll) {\r\n      setItems([...items, ...orderedItems]);\r\n    } else {\r\n      setItems(orderedItems);\r\n    }\r\n  }\r\n\r\n  async function getAllRequest() {\r\n    if (infiniteScroll) {\r\n      if (pagination) {\r\n        if (isQueryPaginationState(pagination)) {\r\n          if (pagination?.page !== 1) {\r\n            setLoading(false);\r\n          }\r\n        } else if (isBodyPaginationState(pagination)) {\r\n          if (pagination.previous) {\r\n            setLoading(false);\r\n          }\r\n        } else {\r\n          throw new Error(\"unrecognized pagination source\");\r\n        }\r\n      }\r\n    } else {\r\n      setLoading(true);\r\n    }\r\n\r\n    setError(null);\r\n\r\n    try {\r\n      if (!getAllConfig) {\r\n        throw new Error(\"Get all method is not defined.\");\r\n      }\r\n\r\n      if (paginationConfig && !pagination) {\r\n        throw new Error(\"Pagination not initialized.\");\r\n      }\r\n\r\n      const {\r\n        url,\r\n        requestHeaders,\r\n        actualMethod,\r\n        dataPath,\r\n        sortBy,\r\n        dataTransform,\r\n      } = getAllConfig;\r\n      await fetchPageData({\r\n        actualMethod: actualMethod,\r\n        url: url,\r\n        requestHeaders: requestHeaders,\r\n        dataPath: dataPath,\r\n        dataTransform: dataTransform,\r\n        sortBy: sortBy,\r\n      });\r\n    } catch (e) {\r\n      setError(e.message);\r\n    }\r\n\r\n    setLoading(false);\r\n  }\r\n\r\n  async function addItem(body: any, containFiles?: boolean, queryParams?: []) {\r\n    if (!postConfig) {\r\n      throw new Error(\"Post method is not defined.\");\r\n    }\r\n\r\n    const { url, requestHeaders, actualMethod } = postConfig;\r\n\r\n    return await httpService.fetch({\r\n      method: actualMethod || \"post\",\r\n      origUrl: url,\r\n      queryParams,\r\n      body: containFiles ? body : JSON.stringify(body),\r\n      headers: {\r\n        ...pageHeaders,\r\n        ...(requestHeaders || {}),\r\n        ...(containFiles ? {} : { \"content-type\": \"application/json\" }),\r\n      },\r\n      responseType: \"boolean\",\r\n    });\r\n  }\r\n\r\n  async function updateItem(body: any, rawData: any, containFiles?: boolean) {\r\n    if (!putConfig) {\r\n      throw new Error(\"Put method is not defined.\");\r\n    }\r\n\r\n    const { url, requestHeaders, actualMethod } = putConfig;\r\n\r\n    return await httpService.fetch({\r\n      method: actualMethod || \"put\",\r\n      origUrl: url,\r\n      rawData,\r\n      body: containFiles ? body : JSON.stringify(body),\r\n      headers: {\r\n        ...pageHeaders,\r\n        ...(requestHeaders || {}),\r\n        ...(containFiles ? {} : { \"content-type\": \"application/json\" }),\r\n      },\r\n      responseType: \"boolean\",\r\n    });\r\n  }\r\n\r\n  async function deleteItem(item: any) {\r\n    const approved: boolean = window.confirm(\r\n      \"Are you sure you want to delete this item?\"\r\n    );\r\n\r\n    if (!approved) {\r\n      return;\r\n    }\r\n\r\n    try {\r\n      if (!deleteConfig) {\r\n        throw new Error(\"Delete method is not defined.\");\r\n      }\r\n\r\n      const { url, requestHeaders, actualMethod } = deleteConfig;\r\n      const success = await httpService.fetch({\r\n        method: actualMethod || \"delete\",\r\n        origUrl: url,\r\n        rawData: item,\r\n        headers: Object.assign({}, pageHeaders, requestHeaders || {}),\r\n        responseType: \"boolean\",\r\n      });\r\n\r\n      if (success) {\r\n        if (pagination?.type === \"infinite-scroll\") {\r\n          setItems([]);\r\n          const updatedParams = [...queryParams];\r\n          remove(updatedParams, (param) =>\r\n            [\"page\", \"limit\"].includes(param.name)\r\n          );\r\n          setQueryParams(\r\n            buildInitQueryParamsAndPaginationState(\r\n              updatedParams,\r\n              paginationConfig\r\n            ).initQueryParams\r\n          );\r\n        } else {\r\n          getAllRequest();\r\n        }\r\n      }\r\n    } catch (e) {\r\n      toast.error(e.message);\r\n    }\r\n  }\r\n\r\n  function submitQueryParams(\r\n    updatedParams: IConfigInputField[],\r\n    reset?: boolean\r\n  ) {\r\n    if (loading) {\r\n      return;\r\n    }\r\n\r\n    if (reset) {\r\n      setItems([]);\r\n      remove(updatedParams, (param) => [\"page\", \"limit\"].includes(param.name));\r\n      updatedParams = buildInitQueryParamsAndPaginationState(\r\n        updatedParams,\r\n        paginationConfig\r\n      ).initQueryParams;\r\n    }\r\n\r\n    updatedParams.map((queryParam, idx) => {\r\n      if (queryParam.type === \"select\" && queryParam.value === \"-- Select --\") {\r\n        // default value means nothing was selected and thus we explicitly\r\n        // empty out the value in this case; otherwise the string '-- Select --'\r\n        // is used as the value for the given queryParams\r\n        queryParam.value = \"\";\r\n      }\r\n    });\r\n\r\n    setQueryParams(updatedParams);\r\n    setPagination(getUpdatedPaginationState(updatedParams, null));\r\n\r\n    let paramsToUrl = [...updatedParams];\r\n\r\n    if (paginationConfig?.type === \"infinite-scroll\") {\r\n      paramsToUrl = paramsToUrl.filter(\r\n        (param) => ![\"page\", \"limit\"].includes(param.name)\r\n      );\r\n    }\r\n\r\n    // Building query string\r\n    const queryState: string = paramsToUrl\r\n      .map((queryParam, idx) => {\r\n        return `${idx === 0 ? \"?\" : \"\"}${queryParam.name}=${encodeURIComponent(\r\n          queryParam.value || \"\"\r\n        )}`;\r\n      })\r\n      .join(\"&\");\r\n\r\n    // Pushing query state to url\r\n    if (page && queryState) {\r\n      push(queryState);\r\n    }\r\n  }\r\n\r\n  function getUpdatedPaginationState(\r\n    updatedParams: IConfigInputField[],\r\n    result: any,\r\n    total?: number\r\n  ): IPaginationState | undefined {\r\n    if (!paginationConfig) {\r\n      return;\r\n    }\r\n\r\n    if (isQueryPagination(paginationConfig)) {\r\n      if (pagination && !isQueryPaginationState(pagination)) {\r\n        throw new Error(\"unexpected pagination source \" + pagination.source);\r\n      }\r\n      const newState: IQueryPaginationState = pagination\r\n        ? pagination\r\n        : {\r\n            source: \"query\",\r\n            type: paginationConfig.type,\r\n            page: parseInt(paginationConfig.params?.page?.value || \"1\"),\r\n            limit: parseInt(paginationConfig.params?.limit?.value || \"10\"),\r\n            descending:\r\n              paginationConfig.params?.descending?.value === \"true\" || false,\r\n            hasPreviousPage: false,\r\n            hasNextPage: false,\r\n            sortBy: paginationConfig.params?.sortBy?.value,\r\n          };\r\n\r\n      newState.total = total || pagination?.total;\r\n      newState.page =\r\n        parseInt(\r\n          updatedParams.find(\r\n            (param) => param.name === paginationConfig?.params?.page?.name\r\n          )?.value\r\n        ) || newState.page;\r\n      newState.limit =\r\n        parseInt(\r\n          updatedParams.find(\r\n            (param) => param.name === paginationConfig?.params?.limit?.name\r\n          )?.value\r\n        ) || newState.limit;\r\n      newState.descending =\r\n        updatedParams.find(\r\n          (param) => param.name === paginationConfig?.params?.descending?.name\r\n        )?.value === \"true\" || newState.descending;\r\n      newState.sortBy =\r\n        updatedParams.find(\r\n          (param) => param.name === paginationConfig?.params?.sortBy?.name\r\n        )?.value || newState.sortBy;\r\n      newState.hasPreviousPage = paginationHelpers.hasPreviousPage(\r\n        newState.page\r\n      );\r\n      newState.hasNextPage = paginationHelpers.hasNextPage(\r\n        newState.page,\r\n        newState.limit,\r\n        newState.total\r\n      );\r\n      return newState;\r\n    } else if (isBodyPagination(paginationConfig)) {\r\n      if (pagination && !isBodyPaginationState(pagination)) {\r\n        throw new Error(\"unexpected pagination source \" + pagination.source);\r\n      }\r\n      const newState: IBodyPaginationState = pagination\r\n        ? pagination\r\n        : {\r\n            source: \"body\",\r\n            type: paginationConfig.type,\r\n            next: result[paginationConfig.params.nextPath || locale.next],\r\n            previous:\r\n              result[paginationConfig.params.prevPath || locale.previous],\r\n            hasNextPage: !!result[\r\n              paginationConfig.params.nextPath || locale.next\r\n            ],\r\n            hasPreviousPage: !!result[\r\n              paginationConfig.params.prevPath || locale.previous\r\n            ],\r\n            limit: parseInt(paginationConfig.params?.limit?.value || \"10\"),\r\n            total: result[paginationConfig.params.countPath || \"count\"],\r\n          };\r\n      if (result) {\r\n        newState.next = result[paginationConfig.params.nextPath || locale.next];\r\n        newState.previous =\r\n          result[paginationConfig.params.prevPath || locale.previous];\r\n        newState.hasNextPage = !!result[\r\n          paginationConfig.params.nextPath || locale.next\r\n        ];\r\n        newState.hasPreviousPage = !!result[\r\n          paginationConfig.params.prevPath || locale.previous\r\n        ];\r\n        newState.total = result[paginationConfig.params.countPath || \"count\"];\r\n      }\r\n      newState.limit =\r\n        parseInt(\r\n          updatedParams.find(\r\n            (param) => param.name === paginationConfig?.params?.limit?.name\r\n          )?.value\r\n        ) || newState.limit;\r\n      return newState;\r\n    } else {\r\n      throw new Error(\"unrecognized pagination source\");\r\n    }\r\n  }\r\n\r\n  function renderItemsUI() {\r\n    if (loading) {\r\n      return <Loader />;\r\n    }\r\n\r\n    const fields = getAllConfig?.fields || getAllConfig?.display?.fields || [];\r\n    const fieldsToFilter = fields\r\n      .filter((field) => field.filterable)\r\n      .map((field) => field.name);\r\n    let filteredItems = items;\r\n\r\n    if (filter && fieldsToFilter.length) {\r\n      filteredItems = items.filter((item) => {\r\n        let passFilter = false;\r\n        fieldsToFilter.forEach((fieldName) => {\r\n          const value = item[fieldName];\r\n          if (\r\n            typeof value === \"string\" &&\r\n            value.toLowerCase().indexOf(filter) >= 0\r\n          ) {\r\n            passFilter = true;\r\n          }\r\n        });\r\n        return passFilter;\r\n      });\r\n    }\r\n\r\n    if (!filteredItems.length) {\r\n      return <div className=\"app-error\">{locale.nothing_to_see}</div>;\r\n    }\r\n\r\n    const getNextPage = paginationConfig\r\n      ? () => {\r\n          if (isQueryPagination(paginationConfig)) {\r\n            if (pagination && !isQueryPaginationState(pagination)) {\r\n              throw new Error(\r\n                \"unexpected pagination source \" + pagination.source\r\n              );\r\n            }\r\n            if (pagination?.page && queryParams.length > 0) {\r\n              const newPage = pagination?.page + 1;\r\n              const updatedParams = queryParams.map((param) => {\r\n                if (param.name === paginationConfig.params?.page?.name) {\r\n                  return {\r\n                    ...param,\r\n                    value: newPage,\r\n                  };\r\n                }\r\n                return param;\r\n              });\r\n              submitQueryParams(updatedParams);\r\n            }\r\n          } else if (isBodyPagination(paginationConfig)) {\r\n            if (pagination && !isBodyPaginationState(pagination)) {\r\n              throw new Error(\r\n                \"unexpected pagination source \" + pagination.source\r\n              );\r\n            }\r\n            if (!getAllConfig || !pagination?.next) {\r\n              return;\r\n            }\r\n            const {\r\n              requestHeaders,\r\n              actualMethod,\r\n              dataPath,\r\n              sortBy,\r\n              dataTransform,\r\n            } = getAllConfig;\r\n            fetchPageData({\r\n              actualMethod: actualMethod,\r\n              url: pagination.next,\r\n              requestHeaders: requestHeaders,\r\n              dataPath: dataPath,\r\n              dataTransform: dataTransform,\r\n              sortBy: sortBy,\r\n            });\r\n          } else {\r\n            throw new Error(\"unrecognized pagination source\");\r\n          }\r\n        }\r\n      : null;\r\n\r\n    const getPreviousPage = paginationConfig\r\n      ? () => {\r\n          if (isQueryPagination(paginationConfig)) {\r\n            if (pagination && !isQueryPaginationState(pagination)) {\r\n              throw new Error(\r\n                \"unexpected pagination source \" + pagination.source\r\n              );\r\n            }\r\n            if (\r\n              pagination?.page &&\r\n              pagination.page > 1 &&\r\n              queryParams.length > 0\r\n            ) {\r\n              const newPage = pagination?.page - 1;\r\n              const updatedParams = queryParams.map((param) => {\r\n                if (param.name === paginationConfig.params?.page?.name) {\r\n                  return {\r\n                    ...param,\r\n                    value: newPage,\r\n                  };\r\n                }\r\n                return param;\r\n              });\r\n              submitQueryParams(updatedParams);\r\n            }\r\n          } else if (isBodyPagination(paginationConfig)) {\r\n            if (pagination && !isBodyPaginationState(pagination)) {\r\n              throw new Error(\r\n                \"unexpected pagination source \" + pagination.source\r\n              );\r\n            }\r\n            if (!getAllConfig || !pagination?.previous) {\r\n              return;\r\n            }\r\n            const {\r\n              requestHeaders,\r\n              actualMethod,\r\n              dataPath,\r\n              sortBy,\r\n              dataTransform,\r\n            } = getAllConfig;\r\n            fetchPageData({\r\n              actualMethod: actualMethod,\r\n              url: pagination.previous,\r\n              requestHeaders: requestHeaders,\r\n              dataPath: dataPath,\r\n              dataTransform: dataTransform,\r\n              sortBy: sortBy,\r\n            });\r\n          } else {\r\n            throw new Error(\"unrecognized pagination source\");\r\n          }\r\n        }\r\n      : null;\r\n\r\n    const callbacks = {\r\n      delete: deleteConfig ? deleteItem : null,\r\n      put: putConfig ? openEditPopup : null,\r\n      action: customActions.length ? openCustomActionPopup : () => {},\r\n      getNextPage,\r\n      getPreviousPage,\r\n    };\r\n\r\n    if (getAllConfig?.display.type === \"cards\") {\r\n      return (\r\n        <Cards\r\n          pagination={pagination}\r\n          callbacks={callbacks}\r\n          fields={fields}\r\n          items={filteredItems}\r\n          customActions={customActions}\r\n          customLabels={customLabels}\r\n        />\r\n      );\r\n    }\r\n\r\n    return (\r\n      <Table\r\n        pagination={pagination}\r\n        callbacks={callbacks}\r\n        fields={fields}\r\n        items={filteredItems}\r\n        customActions={customActions}\r\n        customLabels={customLabels}\r\n      />\r\n    );\r\n  }\r\n\r\n  function renderPaginationStateLabel() {\r\n    if (loading || !items.length) {\r\n      return;\r\n    }\r\n\r\n    if (!pagination || isQueryPaginationState(pagination)) {\r\n      const currentCountFrom =\r\n        ((pagination?.page || 1) - 1) * (pagination?.limit || 10) + 1;\r\n      const currentCountTo = currentCountFrom + items.length - 1;\r\n      let label: string = `${locale.showing_result} ${currentCountFrom}-${currentCountTo} ${locale.out_of} ${pagination?.total} ${locale.items}`;\r\n\r\n      if (pagination?.type === \"infinite-scroll\") {\r\n        label = `Showing ${pagination?.total} items`;\r\n      }\r\n\r\n      if (customLabels?.pagination?.itemsCount) {\r\n        label = customLabels?.pagination?.itemsCount\r\n          .replace(\":currentCountFrom\", currentCountFrom as any)\r\n          .replace(\":currentCountTo\", currentCountFrom as any)\r\n          .replace(\":totalCount\", pagination?.total as any);\r\n      }\r\n\r\n      return <p className=\"center pagination-state\">{label}</p>;\r\n    }\r\n    if (isBodyPaginationState(pagination)) {\r\n      // TODO: extract start end end in a meaningful manner from the API\r\n      // this is not something that id based pagination APIs support generally\r\n      let label: string = `Total Results: ${pagination?.total}`;\r\n      if (pagination?.type === \"infinite-scroll\") {\r\n        label = `Showing ${pagination?.total} items`;\r\n      }\r\n\r\n      if (customLabels?.pagination?.itemsCount) {\r\n        label = customLabels?.pagination?.itemsCount.replace(\r\n          \":totalCount\",\r\n          pagination?.total as any\r\n        );\r\n      }\r\n\r\n      return <p className=\"center pagination-state\">{label}</p>;\r\n    }\r\n  }\r\n\r\n  function renderPageContent() {\r\n    const fields = getAllConfig?.fields || getAllConfig?.display?.fields || [];\r\n    const fieldsToFilter = fields\r\n      .filter((field) => field.filterable)\r\n      .map((field) => field.name);\r\n\r\n    return (\r\n      <React.Fragment>\r\n        <QueryParams\r\n          initialParams={queryParams}\r\n          paginationConfig={paginationConfig}\r\n          submitCallback={submitQueryParams}\r\n        />\r\n        {fieldsToFilter.length > 0 && <FilterField onChange={setFilter} />}\r\n        {pagination?.total && renderPaginationStateLabel()}\r\n        {error ? <div className=\"app-error\">{error}</div> : renderItemsUI()}\r\n      </React.Fragment>\r\n    );\r\n  }\r\n\r\n  useEffect(() => {\r\n    const nextActivePage: IConfigPage | null =\r\n      context?.config?.pages?.filter(\r\n        (p, pIdx) => p.id === page || pIdx + 1 === parseInt(page || \"\")\r\n      )[0] || null;\r\n    context.setActivePage(nextActivePage);\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [page]);\r\n\r\n  useEffect(() => {\r\n    const {\r\n      initQueryParams,\r\n      initialPagination,\r\n    } = buildInitQueryParamsAndPaginationState(\r\n      getAllConfig?.queryParams || [],\r\n      paginationConfig\r\n    );\r\n\r\n    setItems([]);\r\n    setQueryParams(extractQueryParams(initQueryParams));\r\n    setPagination(initialPagination);\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [activePage]);\r\n\r\n  useEffect(() => {\r\n    // Load data when query params\r\n    getAllRequest();\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [queryParams]);\r\n\r\n  return (\r\n    <div className=\"app-page\">\r\n      <header className=\"app-page-header\">\r\n        <hgroup>\r\n          <h2>{activePage?.name}</h2>\r\n          {activePage?.description && <h4>{activePage?.description}</h4>}\r\n        </hgroup>\r\n        {postConfig && (\r\n          <Button\r\n            className=\"add-item\"\r\n            color=\"green\"\r\n            onClick={() =>\r\n              setOpenedPopup({\r\n                type: \"add\",\r\n                title: addItemFormTitle,\r\n                config: postConfig,\r\n                submitCallback: addItem,\r\n              })\r\n            }\r\n          >\r\n            {addItemLabel}\r\n          </Button>\r\n        )}\r\n      </header>\r\n      <main className=\"app-page-content\">{renderPageContent()}</main>\r\n      {openedPopup && (\r\n        <FormPopup\r\n          title={openedPopup.title}\r\n          closeCallback={closeFormPopup}\r\n          submitCallback={openedPopup.submitCallback}\r\n          fields={openedPopup.config?.fields || []}\r\n          rawData={openedPopup.rawData}\r\n          getSingleConfig={openedPopup.getSingleConfig}\r\n          methodConfig={openedPopup.config}\r\n        />\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport const Page = withAppContext(PageComp);\r\n","import React, { useState } from 'react';\r\nimport { useHistory } from 'react-router-dom';\r\nimport { Button } from '../button/button.comp';\r\nimport { toast } from 'react-toastify';\r\nimport { withAppContext } from '../withContext/withContext.comp';\r\nimport locale from '../../common/locale.js';\r\nimport { IAppContext } from '../app.context';\r\n\r\nimport './authPage.scss';\r\n\r\ninterface IProps { context: IAppContext }\r\n\r\nconst AuthPageComp = ({ context }: IProps) => {\r\n  const { location, replace } = useHistory();\r\n  const [user, setUser] = useState<string>('');\r\n  const [pwd, setPwd] = useState<string>('');\r\n  const [tenant, setTenant] = useState<string>('');\r\n  const { setError, httpService } = context;\r\n\r\n  async function submitForm(e: any) {\r\n    e.preventDefault();\r\n    try {\r\n        const credentials = { username: `${user}`, password: `${pwd}`, tenant: `${tenant}`}\r\n        const result = await httpService.fetch({\r\n            method: 'post',\r\n            origUrl: httpService.loginUrl,\r\n            body: JSON.stringify(credentials),\r\n            headers: { 'content-type': 'application/json' }\r\n        });\r\n        if (!result) { throw new Error(locale.login_error) };\r\n        sessionStorage.setItem('diten-token', result.token);\r\n        const { from } = location.state || { from: { pathname: '/' } };\r\n        replace(from);\r\n    } \r\n    catch (e) { \r\n        setError(e.message); \r\n        toast.error(e.message);\r\n    }\r\n  }\r\n\r\n  function handleUserChange(event: any) {\r\n    setUser(event.target.value);\r\n  }\r\n\r\n  function handlePwdChange(event: any) {\r\n    setPwd(event.target.value);\r\n  }\r\n\r\n  function handleTenantChange(event: any) {\r\n    setTenant(event.target.value);\r\n  }\r\n\r\n  return (\r\n    <div className=\"auth-page\">\r\n      <form className='form-content' onSubmit={submitForm}>\r\n        <div className='form-row row'>\r\n          <label>{locale.username}</label>\r\n          <input type=\"text\" placeholder={locale.username_suggestion} onChange={handleUserChange} />\r\n        </div>\r\n        <div className='form-row row'>\r\n          <label>{locale.password}</label>\r\n          <input type=\"password\" placeholder={locale.password_suggenstion} onChange={handlePwdChange} />\r\n        </div>\r\n        <div className='form-row row'>\r\n          <label>{locale.tenant}</label>\r\n          <input type=\"text\" placeholder={locale.tenant_suggenstion} onChange={handleTenantChange} />\r\n        </div>\r\n        <div className=\"buttons-wrapper center\">\r\n          <Button type=\"submit\" onClick={submitForm} color=\"green\">{locale.submit}</Button>\r\n        </div>\r\n      </form>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport const AuthPage = withAppContext(AuthPageComp);","import React, { useState } from 'react';\r\nimport { NavLink } from 'react-router-dom';\r\n\r\nimport { IAppContext } from '../app.context';\r\nimport { withAppContext } from '../withContext/withContext.comp';\r\nimport { Button } from '../button/button.comp';\r\n\r\nimport './navigation.scss';\r\n\r\ninterface IProps {\r\n  context: IAppContext\r\n}\r\n\r\nconst NavigationComp = ({ context: { config } }: IProps) => {\r\n  const [isOpened, setIsOpened] = useState<boolean>(false);\r\n\r\n  return (\r\n    <nav className=\"app-nav\">\r\n      <Button className=\"app-nav-opener\" onClick={() => setIsOpened(!isOpened)}>\r\n        {\r\n          isOpened ? \r\n          <i className=\"fa fa-times\" aria-hidden=\"true\"></i> : \r\n          <i className=\"fa fa-bars\" aria-hidden=\"true\"></i>\r\n        }\r\n      </Button>\r\n      <div className={`app-nav-wrapper ${isOpened ? 'opened' : ''}`}>\r\n        <div className=\"app-nav-links\">\r\n          {\r\n            (config?.pages || []).map((page, idx) => (\r\n              <NavLink to={`/${page.id || idx + 1}`} activeClassName=\"active\" key={`page_${idx}`} onClick={() => setIsOpened(false)}>{page.name}</NavLink>\r\n            ))\r\n          }\r\n        </div>\r\n      </div>\r\n    </nav>\r\n  );\r\n}\r\n\r\nexport const Navigation = withAppContext(NavigationComp);","import React from 'react';\r\nimport { ICustomStyles } from '../../common/models/config.model';\r\n\r\ninterface IProps {\r\n  styles: ICustomStyles\r\n}\r\n\r\nexport const CustomStyles = ({ styles }: IProps) => {\r\n  const cssVars = styles.vars || {};\r\n  const arr = [];\r\n  \r\n  for (const key in cssVars) {\r\n    arr.push(`--${key}: ${(cssVars as any)[key]}`);\r\n  }\r\n\r\n  return (\r\n    <style dangerouslySetInnerHTML={{ __html: `\r\n      :root {\r\n        ${arr.join(';')}\r\n      }\r\n    ` }}>\r\n    </style>\r\n  );\r\n};","import React, { useEffect, useState } from 'react';\r\nimport { HashRouter as Router, Route, Switch, Redirect } from 'react-router-dom';\r\nimport { ToastContainer, toast } from 'react-toastify';\r\nimport ConfigService from '../services/config.service';\r\nimport { IConfig, IConfigPage } from '../common/models/config.model';\r\nimport { Page } from '../components/page/page.comp';\r\nimport { AuthPage } from '../components/authPage/authPage.comp';\r\nimport { Navigation } from '../components/navigation/navigation.comp';\r\nimport { AppContext } from './app.context';\r\nimport HttpService from '../services/http.service';\r\nimport { CustomStyles } from './customStyles/customStyles.comp';\r\n\r\nimport './app.scss';\r\nimport 'react-toastify/dist/ReactToastify.css';\r\n\r\nconst httpService = new HttpService();\r\nconst defaultAppName: string = 'RESTool App';\r\n\r\nfunction changeFavicon(src: string) {\r\n  const link = document.createElement('link');\r\n  const oldLink = document.getElementById('favicon');\r\n  link.id = 'favicon';\r\n  link.rel = 'shortcut icon';\r\n  link.href = src;\r\n  if (oldLink) {\r\n   document.head.removeChild(oldLink);\r\n  }\r\n  document.head.appendChild(link);\r\n }\r\n\r\nfunction App() {\r\n  const [firstLoad, setFirstLoad] = useState<boolean>(true);\r\n  const [config, setConfig] = useState<IConfig | null>(null);\r\n  const [activePage, setActivePage] = useState<IConfigPage | null>(config?.pages?.[0] || null);\r\n  const [error, setError] = useState<string | null>(null);\r\n  const appName: string = config?.name || defaultAppName;\r\n  \r\n  async function loadConfig(url?: string): Promise<void> {\r\n    try {\r\n      const windowConfig = (window as any).RESTool?.config;\r\n      let remoteConfig: IConfig; \r\n      // Try to load config from window object first\r\n      if (!url && windowConfig) {\r\n        remoteConfig = Object.assign({}, windowConfig, {});\r\n      } else {\r\n        remoteConfig = url ? await ConfigService.getRemoteConfig(url) : await ConfigService.loadDefaultConfig();\r\n      }\r\n\r\n      // Setting global config for httpService\r\n      httpService.baseUrl = remoteConfig.baseUrl || '';\r\n      httpService.loginUrl = remoteConfig.loginUrl || '';\r\n      httpService.errorMessageDataPath = remoteConfig.errorMessageDataPath || '';\r\n      httpService.unauthorizedRedirectUrl = remoteConfig.unauthorizedRedirectUrl || '';\r\n      httpService.requestHeaders = remoteConfig.requestHeaders || {};\r\n      document.title = remoteConfig.name || defaultAppName;\r\n\r\n      if (remoteConfig?.favicon) {\r\n        changeFavicon(remoteConfig.favicon);\r\n      }\r\n\r\n      if (remoteConfig?.remoteUrl) {\r\n        return await loadConfig(remoteConfig.remoteUrl);\r\n      }\r\n\r\n      setConfig(remoteConfig);\r\n    } catch (e) {\r\n      console.error('Could not load config file', e);\r\n    }\r\n\r\n    setFirstLoad(false);\r\n  }\r\n\r\n  function scrollToTop(scrollDuration: number = 250) {\r\n    var cosParameter = window.scrollY / 2,\r\n    scrollCount = 0,\r\n    oldTimestamp = performance.now();\r\n\r\n    function step (newTimestamp: number) {\r\n      scrollCount += Math.PI / (scrollDuration / (newTimestamp - oldTimestamp));\r\n\r\n      if (scrollCount >= Math.PI) {\r\n        window.scrollTo(0, 0);\r\n      }\r\n\r\n      if (window.scrollY === 0) {\r\n        return;\r\n      }\r\n\r\n      window.scrollTo(0, Math.round(cosParameter + cosParameter * Math.cos(scrollCount)));\r\n      oldTimestamp = newTimestamp;\r\n      window.requestAnimationFrame(step);\r\n    }\r\n\r\n    window.requestAnimationFrame(step);\r\n  }\r\n\r\n  useEffect(() => {\r\n    loadConfig();\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    const { isValid, errorMessage } = ConfigService.validateConfig(config);\r\n\r\n    if (!isValid) {\r\n      setError(errorMessage);\r\n      toast.error(errorMessage);\r\n      return;\r\n    }\r\n  }, [config]);\r\n\r\n  return (\r\n    <div className=\"restool-app\">\r\n      {\r\n        !config ?\r\n        <div className=\"app-error\">\r\n          {firstLoad ? 'Loading Configuration...' : 'Could not find config file.'}\r\n        </div> :\r\n        \r\n        <AppContext.Provider value={{ config, activePage, setActivePage, error, setError, httpService }}>\r\n          {\r\n            config.customStyles &&\r\n            <CustomStyles\r\n              styles={config.customStyles}\r\n            />\r\n          }\r\n          <Router>\r\n          \r\n            <aside>\r\n              <h1 title={appName} onClick={() => scrollToTop()}>{appName}</h1>\r\n              {\r\n                <Navigation />\r\n              }\r\n            </aside>\r\n            {\r\n              config &&\r\n              <Switch>\r\n                <Route exact path='/login' component={AuthPage} />\r\n                <Route exact path=\"/:page\" component={Page} />\r\n                <Redirect path=\"/\" to={`/${config?.pages?.[0]?.id || '1'}`} />\r\n              </Switch>\r\n               \r\n            }\r\n            <ToastContainer\r\n              position={toast.POSITION.TOP_CENTER}\r\n              autoClose={4000}\r\n              draggable={false}\r\n            />\r\n            \r\n          </Router>\r\n        </AppContext.Provider>\r\n        \r\n      }\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read https://bit.ly/CRA-PWA\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.0/8 are considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\nexport function register(config: any) {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service ' +\r\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\r\n          );\r\n        });\r\n      } else {\r\n        // Is not localhost. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl: string, config: any) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        if (installingWorker == null) {\r\n          return;\r\n        }\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the updated precached content has been fetched,\r\n              // but the previous service worker will still serve the older\r\n              // content until all client tabs are closed.\r\n              console.log(\r\n                'New content is available and will be used when all ' +\r\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\r\n              );\r\n\r\n              // Execute callback\r\n              if (config && config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n\r\n              // Execute callback\r\n              if (config && config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl: string, config: any) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl, {\r\n    headers: { 'Service-Worker': 'script' }\r\n  })\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      const contentType = response.headers.get('content-type');\r\n      if (\r\n        response.status === 404 ||\r\n        (contentType != null && contentType.indexOf('javascript') === -1)\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.'\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready.then(registration => {\r\n      registration.unregister();\r\n    });\r\n  }\r\n}\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport App from './components/app';\r\nimport * as serviceWorker from './serviceWorker';\r\n\r\nimport './index.scss';\r\n\r\nReactDOM.render(<App />, document.getElementById('root'));\r\nserviceWorker.unregister();\r\n","const locale = Object.freeze({\r\n    username: 'Nome utente',\r\n    password: 'Password',\r\n    tenant: 'Organizzazione',\r\n    username_suggestion: 'Inserisci il nome utente',\r\n    password_suggenstion: 'Inserisci la password',\r\n    tenant_suggenstion: 'Inserisci la tua organizzazione',\r\n    submit: 'Invio',\r\n    login_error: 'Login errata!',\r\n    search: 'Cerca',\r\n    previous_page: 'Pagina precedente',\r\n    next_page: 'Prossima pagina',\r\n    showing_result: \"Risultati\",\r\n    out_of: \"di\",\r\n    items: \"totali\",\r\n    nothing_to_see: \"Nessun risultato\",\r\n    enter_text: \"Inserisci testo\",\r\n    next : \"Successivo\",\r\n    previous : \"Precedente\",\r\n    select : \"\",\r\n    add : \"Aggiungi\",\r\n    update : \"Aggiorna\",\r\n    no: \"Nessun/a\"\r\n\r\n});\r\n\r\nmodule.exports = locale;"],"sourceRoot":""}